"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3984],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return u}});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(a),u=i,h=d["".concat(s,".").concat(u)]||d[u]||m[u]||r;return a?n.createElement(h,o(o({ref:t},c),{},{components:a})):n.createElement(h,o({ref:t},c))}));function u(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var p=2;p<r;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5840:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return d}});var n=a(3117),i=a(102),r=(a(7294),a(3905)),o=["components"],l={id:"starting-from-scratch",title:"Starting From Scratch",sidebar_label:"Starting from scratch"},s=void 0,p={unversionedId:"starting-from-scratch",id:"version-4.x/starting-from-scratch",title:"Starting From Scratch",description:"single-spa allows you to build micro frontends that coexist and can each be written with their own framework. This will allow you and your team to:",source:"@site/versioned_docs/version-4.x/starting-from-scratch.md",sourceDirName:".",slug:"/starting-from-scratch",permalink:"/docs/4.x/starting-from-scratch",editUrl:"https://github.com/single-spa/single-spa.js.org/blob/master/website/versioned_docs/version-4.x/starting-from-scratch.md",tags:[],version:"4.x",frontMatter:{id:"starting-from-scratch",title:"Starting From Scratch",sidebar_label:"Starting from scratch"},sidebar:"version-4.x/docs",previous:{title:"Overview of single-spa",permalink:"/docs/4.x/getting-started-overview"},next:{title:"React - Migrating to single-spa",permalink:"/docs/4.x/migrating-react-tutorial"}},c=[{value:"1. Initial setup",id:"1-initial-setup",children:[{value:"1.a Setup Babel",id:"1a-setup-babel",children:[],level:3},{value:"1.b Setup Webpack",id:"1b-setup-webpack",children:[],level:3},{value:"1.c Add npm scripts",id:"1c-add-npm-scripts",children:[],level:3}],level:2},{value:"2. Create the HTML file",id:"2-create-the-html-file",children:[{value:"2.a Create <em>index.html</em>",id:"2a-create-indexhtml",children:[],level:3},{value:"2.b Include scripts and stylesheets",id:"2b-include-scripts-and-stylesheets",children:[],level:3}],level:2},{value:"3. Registering applications",id:"3-registering-applications",children:[],level:2},{value:"4. Create the home application",id:"4-create-the-home-application",children:[{value:"4.a Setup home",id:"4a-setup-home",children:[],level:3},{value:"4.b Define home application lifecycles",id:"4b-define-home-application-lifecycles",children:[],level:3},{value:"4.c Build the React app",id:"4c-build-the-react-app",children:[],level:3},{value:"4.d Define the loading function",id:"4d-define-the-loading-function",children:[],level:3}],level:2},{value:"5. Create the navBar application",id:"5-create-the-navbar-application",children:[{value:"5.a Register navBar",id:"5a-register-navbar",children:[],level:3},{value:"5.b Setup NavBar",id:"5b-setup-navbar",children:[],level:3},{value:"5.c Define NavBar application lifecycles",id:"5c-define-navbar-application-lifecycles",children:[],level:3},{value:"5.d Build the navBar",id:"5d-build-the-navbar",children:[],level:3},{value:"5.e Set up navigation",id:"5e-set-up-navigation",children:[],level:3}],level:2},{value:"6. Create the angularJS application",id:"6-create-the-angularjs-application",children:[{value:"6.a Setup angularJS",id:"6a-setup-angularjs",children:[],level:3},{value:"6.b Register angularJS as an application",id:"6b-register-angularjs-as-an-application",children:[],level:3},{value:"6.c Set up Application Lifecycles",id:"6c-set-up-application-lifecycles",children:[],level:3},{value:"6.d Set up the AngularJS application",id:"6d-set-up-the-angularjs-application",children:[],level:3},{value:"6.e Set up in-app routing",id:"6e-set-up-in-app-routing",children:[],level:3}],level:2},{value:"Finished!",id:"finished",children:[],level:2}],m={toc:c};function d(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"single-spa allows you to build micro frontends that coexist and can each be written with their own framework. This will allow you and your team to:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Use multiple frameworks on the same page. ",(0,r.kt)("a",{parentName:"li",href:"/docs/4.x/ecosystem#docsNav"},"See the single-spa ecosystem for more info")),(0,r.kt)("li",{parentName:"ol"},"Write code using a new framework, without rewriting your existing application"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Lazy_loading"},"Lazy load")," code for improved initial load time.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Single-spa can be used with just about any build system or JavaScript framework"),", but this tutorial will focus on creating a web app with ",(0,r.kt)("a",{parentName:"p",href:"https://webpack.js.org/"},"Webpack"),", ",(0,r.kt)("a",{parentName:"p",href:"https://reactjs.org/"},"React"),", and ",(0,r.kt)("a",{parentName:"p",href:"https://angularjs.org/"},"AngularJS"),". Our tutorial puts everything into a single code repository, but it is also possible to have ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/separating-applications#option-3-dynamic-module-loading"},"separate code repositories")," for each of your applications."),(0,r.kt)("p",null,"For this tutorial we will be creating the following applications to showcase the power and usefulness of single-spa:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"home: a React app using ",(0,r.kt)("a",{parentName:"li",href:"https://reacttraining.com/react-router/"},"React Router")),(0,r.kt)("li",{parentName:"ol"},"navBar: a React app that always displays top-level navigation"),(0,r.kt)("li",{parentName:"ol"},"angularJS: an AngularJS app using ",(0,r.kt)("a",{parentName:"li",href:"https://ui-router.github.io/ng1/"},"angular-ui-router"))),(0,r.kt)("p",null,"The complete code for this example is in the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/alocke12992/single-spa-simple-example"},(0,r.kt)("inlineCode",{parentName:"a"},"single-spa-simple-example"))," repository."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"We encourage you to read through all the ",(0,r.kt)("a",{parentName:"p",href:"/"},"single-spa docs")," to become familiar with the entire single-spa setup. Visit the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/single-spa/single-spa"},"single-spa Github"),", the ",(0,r.kt)("a",{parentName:"p",href:"https://single-spa.js.org/help.html"},"help section"),", or our community ",(0,r.kt)("a",{parentName:"p",href:"https://join.slack.com/t/single-spa/shared_invite/zt-yxfqpl2u-PNx3uZtS3pgAXbOBWsdwOA"},"Slack")," channel for more support."))),(0,r.kt)("h2",{id:"1-initial-setup"},"1. Initial setup"),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"For this tutorial, we will be using ",(0,r.kt)("a",{parentName:"p",href:"https://yarnpkg.com/en/"},"yarn")," but npm has its own equivalent commands and can be used almost interchangibly."))),(0,r.kt)("p",null,"Create a new folder for this project and navigate into it. Initialize a new project using your package manager, and then install single-spa as a dependency. Then create a ",(0,r.kt)("em",{parentName:"p"},"src/")," folder to hold all of our micro-service applications, with each in their own folder."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"mkdir single-spa-simple-example && cd single-spa-simple-example\nyarn init              # or npm init\nyarn add single-spa    # or npm install --save single-spa\nmkdir src\n")),(0,r.kt)("h3",{id:"1a-setup-babel"},"1.a Setup Babel"),(0,r.kt)("p",null,"We will be using ",(0,r.kt)("a",{parentName:"p",href:"https://babeljs.io/"},"Babel")," to compile our code. Install it and some additional dependencies using:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add --dev @babel/core @babel/preset-env @babel/preset-react @babel/plugin-syntax-dynamic-import @babel/plugin-proposal-object-rest-spread\n")),(0,r.kt)("p",null,"Next create a ",(0,r.kt)("em",{parentName:"p"},".babelrc")," file and paste in the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title=".babelrc"',title:'".babelrc"'},'{\n  "presets": [\n    ["@babel/preset-env", {\n      "targets": {\n        "browsers": ["last 2 versions"]\n      }\n    }],\n    ["@babel/preset-react"]\n  ],\n  "plugins": [\n    "@babel/plugin-syntax-dynamic-import",\n    "@babel/plugin-proposal-object-rest-spread"\n  ]\n}\n')),(0,r.kt)("p",null,"Learn more about what each of these packages do by visiting the ",(0,r.kt)("a",{parentName:"p",href:"https://babeljs.io/docs/setup/"},"Babel docs"),"."),(0,r.kt)("h3",{id:"1b-setup-webpack"},"1.b Setup Webpack"),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"It is important to point out that ",(0,r.kt)("strong",{parentName:"p"},"you do not have to use Webpack in order use single-spa"),". Learn more about ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/separating-applications"},"Separating applications")," and the different ways you can use single-spa for your specific build."))),(0,r.kt)("p",null,"Run the following commands to add Webpack, Webpack plugins, and loaders."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# Webpack core\nyarn add webpack webpack-dev-server webpack-cli --dev\n# Webpack plugins\nyarn add clean-webpack-plugin --dev\n# Webpack loaders\nyarn add style-loader css-loader html-loader babel-loader --dev\n")),(0,r.kt)("p",null,"Learn more about these Webpack plugins and loaders at their respective documentation pages."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/clean-webpack-plugin"},"CleanWebpackPlugin")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://webpack.js.org/loaders/style-loader/"},"style-loader")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://webpack.js.org/loaders/css-loader/"},"css-loader")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://webpack.js.org/loaders/html-loader/"},"html-Loader")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://webpack.js.org/loaders/babel-loader/"},"babel-Loader"))),(0,r.kt)("p",null,"In the root of your project create a new file name ",(0,r.kt)("em",{parentName:"p"},"webpack.config.js")," and paste in the following code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="webpack.config.js"',title:'"webpack.config.js"'},"const path = require('path');\nconst webpack = require('webpack');\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin');\n\nmodule.exports = {\n  mode: 'development',\n  entry: {\n    // Set the single-spa config as the project entry point\n    'single-spa.config': './single-spa.config.js',\n  },\n  output: {\n    publicPath: '/dist/',\n    filename: '[name].js',\n    path: path.resolve(__dirname, 'dist'),\n  },\n  module: {\n    rules: [\n      {\n        // Webpack style loader added so we can use materialize\n        test: /\\.css$/,\n        use: ['style-loader', 'css-loader'],\n      },\n      {\n        test: /\\.js$/,\n        exclude: [path.resolve(__dirname, 'node_modules')],\n        loader: 'babel-loader',\n      },\n      {\n        // This plugin will allow us to use AngularJS HTML templates\n        test: /\\.html$/,\n        exclude: /node_modules/,\n        loader: 'html-loader',\n      },\n    ],\n  },\n  node: {\n    fs: 'empty',\n  },\n  resolve: {\n    modules: [path.resolve(__dirname, 'node_modules')],\n  },\n  plugins: [\n    // A webpack plugin to remove/clean the output folder before building\n    new CleanWebpackPlugin(),\n  ],\n  devtool: 'source-map',\n  externals: [],\n  devServer: {\n    historyApiFallback: true,\n  },\n};\n")),(0,r.kt)("h3",{id:"1c-add-npm-scripts"},"1.c Add npm scripts"),(0,r.kt)("p",null,"The last step in our project set up is to include a couple scripts in our package.json to run webpack-dev-server and to create a production build. Add the following to your ",(0,r.kt)("em",{parentName:"p"},"package.json"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="package.json"',title:'"package.json"'},'"scripts": {\n  "start": "webpack-dev-server --open",\n  "build": "webpack --config webpack.config.js -p"\n},\n')),(0,r.kt)("h2",{id:"2-create-the-html-file"},"2. Create the HTML file"),(0,r.kt)("p",null,"Our goal in this step will be to create a ",(0,r.kt)("strong",{parentName:"p"},"single-spa config"),". The single-spa config file is where your applications are initialized, and an HTML page will request this config."),(0,r.kt)("p",null,"You\u2019ll want to keep your single-spa config as small as possible since it is the master controller and could easily become a maintenance bottleneck. You don\u2019t want to be constantly changing both the single-spa config and the child applications."),(0,r.kt)("h3",{id:"2a-create-indexhtml"},"2.a Create ",(0,r.kt)("em",{parentName:"h3"},"index.html")),(0,r.kt)("p",null,"Create an ",(0,r.kt)("em",{parentName:"p"},"index.html")," file the root directory. Inside this file, we'll be adding a ",(0,r.kt)("inlineCode",{parentName:"p"},"div")," element for each application, each with a unique ID. Mounting each application to a different point allows us to maintain them completely separated and so that they never try to modify the same DOM."),(0,r.kt)("p",null,"Paste in the following HTML markup:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="index.html"',title:'"index.html"'},'<html>\n  <head></head>\n  <body>\n    <div id="navBar"></div>\n    <div id="home"></div>\n    <div id="angularJS"></div>\n  </body>\n</html>\n')),(0,r.kt)("h3",{id:"2b-include-scripts-and-stylesheets"},"2.b Include scripts and stylesheets"),(0,r.kt)("p",null,"For styling, we will be using the ",(0,r.kt)("a",{parentName:"p",href:"https://materializecss.com/"},"Materialize")," framework. We can enable all of our applications to access the Materialize library by including the styles and scripts in ",(0,r.kt)("em",{parentName:"p"},"index.html"),"."),(0,r.kt)("p",null,"Additionally, to enable single-spa, we will need to include a script tag that references ",(0,r.kt)("a",{parentName:"p",href:"configuration#indexhtml-file"},(0,r.kt)("em",{parentName:"a"},"single-spa.config.js"))," in ",(0,r.kt)("em",{parentName:"p"},"index.html"),". We will be adding and populating this file in the next step. Webpack outputs our built code to ",(0,r.kt)("em",{parentName:"p"},"dist/")," so that will be the path of ",(0,r.kt)("em",{parentName:"p"},"single-spa.config.js"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="index.html"',title:'"index.html"'},'<html>\n  <head>\n    \x3c!-- Materialize --\x3e\n    <link\n      rel="stylesheet"\n      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css"\n    />\n    <link\n      href="https://fonts.googleapis.com/icon?family=Material+Icons"\n      rel="stylesheet"\n    />\n  </head>\n  <body>\n    <div id="navBar"></div>\n    <div id="home"></div>\n    <div id="angularJS"></div>\n\n    \x3c!-- jQuery --\x3e\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"><\/script>\n    \x3c!-- Materialize --\x3e\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"><\/script>\n    \x3c!-- import the single-spa config file --\x3e\n    <script src="/dist/single-spa.config.js"><\/script>\n  </body>\n</html>\n')),(0,r.kt)("h2",{id:"3-registering-applications"},"3. Registering applications"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"configuration#registering-applications"},"Registering applications")," is how we tell single-spa when and how to ",(0,r.kt)("inlineCode",{parentName:"p"},"bootstrap"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"mount"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"unmount")," an application."),(0,r.kt)("p",null,"Create a new file called ",(0,r.kt)("em",{parentName:"p"},"single-spa.config.js")," in the root directory. Let's start by registering the ",(0,r.kt)("inlineCode",{parentName:"p"},"home")," application."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="single-spa.config.js"',title:'"single-spa.config.js"'},"import { registerApplication, start } from 'single-spa';\n\nregisterApplication(\n  // Name of our single-spa application\n  'home',\n  // loadingFunction\n  () => {},\n  // activityFunction\n  location =>\n    location.pathname === '' ||\n    location.pathname === '/' ||\n    location.pathname.startsWith('/home'),\n);\n\nstart();\n")),(0,r.kt)("p",null,"The above code needs explanation. In order to register an application with single-spa, import and call the ",(0,r.kt)("inlineCode",{parentName:"p"},"registerApplication")," function; and include the application ",(0,r.kt)("inlineCode",{parentName:"p"},"name"),", a ",(0,r.kt)("inlineCode",{parentName:"p"},"loadingFunction"),", and an ",(0,r.kt)("inlineCode",{parentName:"p"},"activityFunction")," as parameters."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"loadingFunction")," must be a function that returns a Promise (or an ",(0,r.kt)("a",{parentName:"p",href:"https://ponyfoo.com/articles/understanding-javascript-async-await"},(0,r.kt)("inlineCode",{parentName:"a"},"async")," function"),"). The function will be called with no arguments when loading the application for the first time. The returned promise must resolve with the application code. We will come back to this in ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/starting-from-scratch#4d-connect-to-single-spa-config"},"Step 4.d")," after creating the ",(0,r.kt)("strong",{parentName:"p"},"home")," application."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"activityFunction")," must be a function that returns a truthy value that represents whether the application should be active, and must be a pure function. The function is provided ",(0,r.kt)("inlineCode",{parentName:"p"},"window.location")," as the first argument. The most common scenario is to determine if an application is active by looking at window.location, but not always. In this case, ",(0,r.kt)("inlineCode",{parentName:"p"},"home")," will be our root application so it will be shown at the root url paths as well as and url pathname that begins with ",(0,r.kt)("inlineCode",{parentName:"p"},"/home"),"."),(0,r.kt)("p",null,"Lastly, we also import the ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," function from the single-spa package and call it in order for applications be mounted. Before ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," is called, applications will be loaded into the browser but not bootstrapped/mounted/unmounted. Learn more about the ",(0,r.kt)("a",{parentName:"p",href:"configuration#calling-singlespastart"},"start()")," api here."),(0,r.kt)("h2",{id:"4-create-the-home-application"},"4. Create the home application"),(0,r.kt)("h3",{id:"4a-setup-home"},"4.a Setup home"),(0,r.kt)("p",null,"Start by adding a ",(0,r.kt)("em",{parentName:"p"},"home/")," folder inside of the ",(0,r.kt)("em",{parentName:"p"},"src/")," directory. Then inside of ",(0,r.kt)("em",{parentName:"p"},"home/")," we will create two files: ",(0,r.kt)("em",{parentName:"p"},"home.app.js")," and ",(0,r.kt)("em",{parentName:"p"},"root.component.js"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"mkdir src/home && cd src/home\ntouch home.app.js root.component.js\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"home")," application will use React with ",(0,r.kt)("a",{parentName:"p",href:"https://reacttraining.com/react-router/web/example/animated-transitions"},"React Router animated transitions"),". Using your package manager, add ",(0,r.kt)("inlineCode",{parentName:"p"},"react"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"react-dom"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"react-router-dom"),", and ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/ecosystem-react"},(0,r.kt)("inlineCode",{parentName:"a"},"single-spa-react"))," as dependencies."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"single-spa-react")," is a helper library that already implements single-spa lifecycle functions for React, so you don't have to implement these yourself."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"yarn add react react-dom single-spa-react react-router-dom react-transition-group\n")),(0,r.kt)("p",null,"Your file tree should now look similar to this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},".\n\u251c\u2500\u2500 node_modules\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 src\n\u2502  \u2514\u2500\u2500 home\n\u2502       \u251c\u2500\u2500 home.app.js\n\u2502       \u2514\u2500\u2500 root.component.js\n\u251c\u2500\u2500 .babelrc\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 single-spa.config.js\n\u251c\u2500\u2500 webpack.config.js\n\u251c\u2500\u2500 yarn-error.log\n\u251c\u2500\u2500 yarn.lock\n\u2514\u2500\u2500 README.md\n")),(0,r.kt)("h3",{id:"4b-define-home-application-lifecycles"},"4.b Define home application lifecycles"),(0,r.kt)("p",null,"Since we have registered our application, single-spa will be listening for the ",(0,r.kt)("strong",{parentName:"p"},"home")," application to bootstrap and mount. ",(0,r.kt)("strong",{parentName:"p"},"home")," app will be responsible for this. We will set this up in ",(0,r.kt)("em",{parentName:"p"},"home.app.js"),"."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/ecosystem-react"},"single-spa-react")," provides the generic React lifecycle hooks for registering a singe-spa application, which we'll import as ",(0,r.kt)("inlineCode",{parentName:"p"},"singleSpaReact"),"."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"singleSpaReact")," requires 4 parameters: the instance of React, the instance of ReactDOM, the rootComponent to be rendered (in this case, the ",(0,r.kt)("inlineCode",{parentName:"p"},"Home")," component), and a ",(0,r.kt)("inlineCode",{parentName:"p"},"domElementGetter")," function that return a DOMElement where the Home application will be bootstrapped, mounted, and unmounted by single-spa."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="home.app.js"',title:'"home.app.js"'},"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport singleSpaReact from 'single-spa-react';\nimport Home from './root.component.js';\n\nfunction domElementGetter() {\n  return document.getElementById('home');\n}\n\nconst reactLifecycles = singleSpaReact({\n  React,\n  ReactDOM,\n  rootComponent: Home,\n  domElementGetter,\n});\n\nexport const bootstrap = [reactLifecycles.bootstrap];\n\nexport const mount = [reactLifecycles.mount];\n\nexport const unmount = [reactLifecycles.unmount];\n")),(0,r.kt)("h3",{id:"4c-build-the-react-app"},"4.c Build the React app"),(0,r.kt)("p",null,"Now that we have the ",(0,r.kt)("strong",{parentName:"p"},"home")," application registered, let us build the React app. We've reproduced the code from ",(0,r.kt)("a",{parentName:"p",href:"https://reacttraining.com/react-router/web/example/animated-transitions"},"react-router's Animated Transitions")," below with two modifications, which are highlighted below. The first change is to add ",(0,r.kt)("inlineCode",{parentName:"p"},"/home")," as the basename prop for ",(0,r.kt)("inlineCode",{parentName:"p"},"Router"),", since in ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/starting-from-scratch#step-three-registering-an-app"},"Step 3")," we had configured this application to handle routing at the ",(0,r.kt)("inlineCode",{parentName:"p"},"/home")," path. The second change is to the top-most div's styles so that ",(0,r.kt)("strong",{parentName:"p"},"home")," appears beneath the ",(0,r.kt)("strong",{parentName:"p"},"navBar")," that we'll create later."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'{24,27} title="root.component.js"',"{24,27}":!0,title:'"root.component.js"'},"import React from 'react';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n} from 'react-router-dom';\n\n/* you'll need this CSS somewhere\n.fade-enter {\n  opacity: 0;\n  z-index: 1;\n}\n\n.fade-enter.fade-enter-active {\n  opacity: 1;\n  transition: opacity 250ms ease-in;\n}\n*/\n\nconst AnimationExample = () => (\n  <Router basename=\"/home\">\n    <Route\n      render={({ location }) => (\n        <div style={{ position: 'relative', height: '100%' }}>\n          <Route\n            exact\n            path=\"/\"\n            render={() => <Redirect to=\"/hsl/10/90/50\" />}\n          />\n\n          <ul style={styles.nav}>\n            <NavLink to=\"/hsl/10/90/50\">Red</NavLink>\n            <NavLink to=\"/hsl/120/100/40\">Green</NavLink>\n            <NavLink to=\"/rgb/33/150/243\">Blue</NavLink>\n            <NavLink to=\"/rgb/240/98/146\">Pink</NavLink>\n          </ul>\n\n          <div style={styles.content}>\n            <TransitionGroup>\n              {/* no different than other usage of\n                CSSTransition, just make sure to pass\n                `location` to `Switch` so it can match\n                the old location as it animates out\n              */}\n              <CSSTransition key={location.key} classNames=\"fade\" timeout={300}>\n                <Switch location={location}>\n                  <Route exact path=\"/hsl/:h/:s/:l\" component={HSL} />\n                  <Route exact path=\"/rgb/:r/:g/:b\" component={RGB} />\n                  {/* Without this `Route`, we would get errors during\n                    the initial transition from `/` to `/hsl/10/90/50`\n                  */}\n                  <Route render={() => <div>Not Found</div>} />\n                </Switch>\n              </CSSTransition>\n            </TransitionGroup>\n          </div>\n        </div>\n      )}\n    />\n  </Router>\n);\n\nconst NavLink = props => (\n  <li style={styles.navItem}>\n    <Link {...props} style={{ color: 'inherit' }} />\n  </li>\n);\n\nconst HSL = ({ match: { params } }) => (\n  <div\n    style={{\n      ...styles.fill,\n      ...styles.hsl,\n      background: `hsl(${params.h}, ${params.s}%, ${params.l}%)`,\n    }}>\n    hsl({params.h}, {params.s}%, {params.l}%)\n  </div>\n);\n\nconst RGB = ({ match: { params } }) => (\n  <div\n    style={{\n      ...styles.fill,\n      ...styles.rgb,\n      background: `rgb(${params.r}, ${params.g}, ${params.b})`,\n    }}>\n    rgb({params.r}, {params.g}, {params.b})\n  </div>\n);\n\nconst styles = {};\n\nstyles.fill = {\n  position: 'absolute',\n  left: 0,\n  right: 0,\n  top: 0,\n  bottom: 0,\n};\n\nstyles.content = {\n  ...styles.fill,\n  top: '40px',\n  textAlign: 'center',\n};\n\nstyles.nav = {\n  padding: 0,\n  margin: 0,\n  position: 'absolute',\n  top: 0,\n  height: '40px',\n  width: '100%',\n  display: 'flex',\n};\n\nstyles.navItem = {\n  textAlign: 'center',\n  flex: 1,\n  listStyleType: 'none',\n  padding: '10px',\n};\n\nstyles.hsl = {\n  ...styles.fill,\n  color: 'white',\n  paddingTop: '20px',\n  fontSize: '30px',\n};\n\nstyles.rgb = {\n  ...styles.fill,\n  color: 'white',\n  paddingTop: '20px',\n  fontSize: '30px',\n};\n\nexport default AnimationExample;\n")),(0,r.kt)("h3",{id:"4d-define-the-loading-function"},"4.d Define the loading function"),(0,r.kt)("p",null,"We will now define the ",(0,r.kt)("a",{parentName:"p",href:"configuration#loading-function"},"loading function")," for ",(0,r.kt)("strong",{parentName:"p"},"home")," in ",(0,r.kt)("em",{parentName:"p"},"single-spa.config.js"),"."),(0,r.kt)("p",null,"One way of doing this is by simply passing in an ",(0,r.kt)("em",{parentName:"p"},"application config object")," (the ",(0,r.kt)("inlineCode",{parentName:"p"},"reactLifecycles")," functions we built in ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/starting-from-scratch#b-application-lifecycles"},"Step 4.b")," are an example of this) directly to the ",(0,r.kt)("inlineCode",{parentName:"p"},"registerApplication")," function."),(0,r.kt)("p",null,"However, to encourage best practices, we will leverage ",(0,r.kt)("a",{parentName:"p",href:"https://webpack.js.org/guides/code-splitting/"},"code splitting using Webpack")," to easily lazy-load registered applications on-demand. Think about your project's needs when deciding which route to take."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'{7} title="single-spa.config.js"',"{7}":!0,title:'"single-spa.config.js"'},"import { registerApplication, start } from 'single-spa';\n\nregisterApplication(\n  // Name of our single-spa application\n  'home',\n  // Our loading function\n  () => import('./src/home/home.app.js'),\n  // Our activity function\n  () =>\n    location.pathname === '' ||\n    location.pathname === '/' ||\n    location.pathname.startsWith('/home'),\n);\n\nstart();\n")),(0,r.kt)("p",null,"We are now ready to test out our first application."),(0,r.kt)("p",null,"Run ",(0,r.kt)("inlineCode",{parentName:"p"},"yarn start")," in the root directory to start up the ",(0,r.kt)("inlineCode",{parentName:"p"},"webpack-dev-server"),"."),(0,r.kt)("h2",{id:"5-create-the-navbar-application"},"5. Create the navBar application"),(0,r.kt)("p",null,"Creating and registering our ",(0,r.kt)("strong",{parentName:"p"},"navBar")," application will be very similar to the process we used to create our ",(0,r.kt)("strong",{parentName:"p"},"home")," application. The main difference is that ",(0,r.kt)("strong",{parentName:"p"},"navBar")," will export as an object with lifecycle methods and use ",(0,r.kt)("a",{parentName:"p",href:"https://webpack.js.org/guides/code-splitting/#dynamic-imports"},"dynamic imports")," (a Webpack 2+ feature) to obtain the application object."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"You may wish to revisit ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/starting-from-scratch#3-registering-applications"},"Step 3")," for a more detailed explanation on how to register an application."))),(0,r.kt)("h3",{id:"5a-register-navbar"},"5.a Register navBar"),(0,r.kt)("p",null,"Just as before, register the ",(0,r.kt)("strong",{parentName:"p"},"navBar")," application using the ",(0,r.kt)("inlineCode",{parentName:"p"},"registerApplication")," in ",(0,r.kt)("em",{parentName:"p"},"single-spa.config.js"),". Two items should be called out here:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Notice that we are using ",(0,r.kt)("inlineCode",{parentName:"li"},".then()")," after our import in the loadingFunction. This is because this application is returning an application config object, and we access the actual ",(0,r.kt)("strong",{parentName:"li"},"navBar")," application as a property and return it."),(0,r.kt)("li",{parentName:"ul"},"Recall that the activityFunction should return a truthy value when the application should be active. Since we want our ",(0,r.kt)("strong",{parentName:"li"},"navBar")," to be always be displayed, regardless of any other displayed applications, we define a function that will always return ",(0,r.kt)("inlineCode",{parentName:"li"},"true"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'{3-7} title="single-spa.config.js"',"{3-7}":!0,title:'"single-spa.config.js"'},"import {registerApplication, start} from 'single-spa'\n\nregisterApplication(\n  'navBar',\n  () => import('./src/navBar/navBar.app.js').then(module => module.navBar),\n  () => true\n);\n\n...\n")),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Don't forget to define a corresponding mount point for ",(0,r.kt)("em",{parentName:"p"},"every newly registered application")," in your root HTML file. We did this already in ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/starting-from-scratch#2a-create-indexhtml"},"Step 2.a")," so just remember to do so for each new application in the future."))),(0,r.kt)("h3",{id:"5b-setup-navbar"},"5.b Setup NavBar"),(0,r.kt)("p",null,"Now that we have registered our application, let's create a new ",(0,r.kt)("em",{parentName:"p"},"navBar/")," folder in the ",(0,r.kt)("em",{parentName:"p"},"src/")," directory to contain ",(0,r.kt)("em",{parentName:"p"},"navBar.app.js")," and ",(0,r.kt)("em",{parentName:"p"},"root.component.js")," files."),(0,r.kt)("p",null,"From the root directory:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"mkdir src/navBar\ntouch src/navBar/navBar.app.js src/navBar/root.component.js\n")),(0,r.kt)("h3",{id:"5c-define-navbar-application-lifecycles"},"5.c Define NavBar application lifecycles"),(0,r.kt)("p",null,"In ",(0,r.kt)("em",{parentName:"p"},"navbar.app.js")," add the following application lifecycles. This is slightly different from how we accomplished this in ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/starting-from-scratch#b-application-lifecycles"},"Step 4.b"),". For this application we are going to demonstrate how you can export an object which contains the required lifecycle methods using ",(0,r.kt)("inlineCode",{parentName:"p"},"single-spa-react"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="navbar.app.js"',title:'"navbar.app.js"'},"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport singleSpaReact from 'single-spa-react';\nimport NavBar from './root.component.js';\n\nfunction domElementGetter() {\n  return document.getElementById('navBar');\n}\n\nexport const navBar = singleSpaReact({\n  React,\n  ReactDOM,\n  rootComponent: NavBar,\n  domElementGetter,\n});\n")),(0,r.kt)("h3",{id:"5d-build-the-navbar"},"5.d Build the navBar"),(0,r.kt)("p",null,"Recall that Materialize is included so we can use the class names it provides inside of the ",(0,r.kt)("strong",{parentName:"p"},"navBar")," component. Include the following in ",(0,r.kt)("em",{parentName:"p"},"root.component.js"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="root.component.js"',title:'"root.component.js"'},'import React from \'react\';\n\nconst NavBar = () => (\n  <nav>\n    <div className="nav-wrapper">\n      <a className="brand-logo">single-spa</a>\n      <ul id="nav-mobile" className="right hide-on-med-and-down">\n        <li>\n          <a>Home</a>\n        </li>\n        <li>\n          <a>AngularJS</a>\n        </li>\n      </ul>\n    </div>\n  </nav>\n);\n\nexport default NavBar;\n')),(0,r.kt)("h3",{id:"5e-set-up-navigation"},"5.e Set up navigation"),(0,r.kt)("p",null,"With single-spa, there are a number of options that will allow us to navigate between our separate SPAs. single-spa provides ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/api#navigatetourl"},(0,r.kt)("inlineCode",{parentName:"a"},"navigateToUrl")),", a utility function that allows for easy url navigation between registered applications."),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"An alternative method would be to call ",(0,r.kt)("inlineCode",{parentName:"p"},"pushState()"),", which ",(0,r.kt)("inlineCode",{parentName:"p"},"navigateToUrl")," does internally. This method could be used in conjunction with other client-side libraries but there are some ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/single-spa/single-spa-examples/issues/54#issuecomment-424384123"},"additional considerations when using ",(0,r.kt)("inlineCode",{parentName:"a"},"pushState")),"."))),(0,r.kt)("p",null,"To use the function, we simply need to import it and call it with a click event, passing in each application's url (as designated by the activityFunction set in ",(0,r.kt)("em",{parentName:"p"},"single-spa.config.js"),") as a string to the anchor tag's ",(0,r.kt)("inlineCode",{parentName:"p"},"href"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'{2,7,9,10} title="root.component.js"',"{2,7,9,10}":!0,title:'"root.component.js"'},'import React from \'react\';\nimport { navigateToUrl } from \'single-spa\';\n\nconst NavBar = () => (\n  <nav>\n    <div className="nav-wrapper">\n      <a href="/" onClick={navigateToUrl} className="brand-logo">\n        single-spa\n      </a>\n      <ul id="nav-mobile" className="right hide-on-med-and-down">\n        <li>\n          <a href="/" onClick={navigateToUrl}>\n            Home\n          </a>\n        </li>\n        <li>\n          <a href="/angularJS" onClick={navigateToUrl}>\n            AngularJS\n          </a>\n        </li>\n      </ul>\n    </div>\n  </nav>\n);\n\nexport default NavBar;\n')),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"We have yet to build the AngularJS application that corresponds to the ",(0,r.kt)("inlineCode",{parentName:"p"},"/angularJS")," URL so navigating to it at this point will fail."))),(0,r.kt)("h2",{id:"6-create-the-angularjs-application"},"6. Create the angularJS application"),(0,r.kt)("h3",{id:"6a-setup-angularjs"},"6.a Setup angularJS"),(0,r.kt)("p",null,"Create a new folder in the src directory to contain the ",(0,r.kt)("strong",{parentName:"p"},"angularJS")," application files. There are quite a few to create."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir src/angularJS\ncd src/angularJS\ntouch angularJS.app.js root.component.js root.template.html routes.js app.module.js gifs.component.js gifs.template.html\n")),(0,r.kt)("p",null,"To demonstrate the ability to use client-side routing within applications, our AngularJS application will make use of ",(0,r.kt)("inlineCode",{parentName:"p"},"angular-ui-router"),"."),(0,r.kt)("p",null,"Using your package manager, add ",(0,r.kt)("inlineCode",{parentName:"p"},"angular"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"angular-ui-router"),", and ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/ecosystem-angularjs"},(0,r.kt)("inlineCode",{parentName:"a"},"single-spa-angularjs"))," (the single-spa AngularJS helper) as dependencies, like so:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"yarn add angular angular-ui-router single-spa-angularjs\n")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Within the ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/ecosystem"},"single-spa ecosystem")," there is a growing number of projects that help you bootstrap, mount, and unmount your applications that are written with popular frameworks."))),(0,r.kt)("h3",{id:"6b-register-angularjs-as-an-application"},"6.b Register angularJS as an application"),(0,r.kt)("p",null,"Just as we did for the ",(0,r.kt)("strong",{parentName:"p"},"home")," and ",(0,r.kt)("strong",{parentName:"p"},"navBar")," applications, we start by registering the ",(0,r.kt)("strong",{parentName:"p"},"angularJS")," application in ",(0,r.kt)("em",{parentName:"p"},"single-spa.config.js"),". Add the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="single-spa.config.js"',title:'"single-spa.config.js"'},"registerApplication(\n  'angularJS',\n  () => import('./src/angularJS/angularJS.app.js'),\n  () => {},\n);\n")),(0,r.kt)("p",null,"Hard-coding the activityFunction begins to get tedious so let us add a function that will simplify the matching logic for our application configuration. To do this, we've created a function that takes a string that represents the path prefix and returns a function that accepts ",(0,r.kt)("inlineCode",{parentName:"p"},"location")," and matches whether the ",(0,r.kt)("inlineCode",{parentName:"p"},"location")," starts with the path prefix."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'{3-7,12} title="single-spa.config.js"',"{3-7,12}":!0,title:'"single-spa.config.js"'},"...\n\nfunction pathPrefix(prefix) {\n    return function(location) {\n        return location.pathname.startsWith(prefix);\n    }\n}\n\nregisterApplication(\n  'angularJS',\n  () => import ('./src/angularJS/angularJS.app.js'),\n  pathPrefix('/angularJS')\n));\n\nstart();\n")),(0,r.kt)("h3",{id:"6c-set-up-application-lifecycles"},"6.c Set up Application Lifecycles"),(0,r.kt)("p",null,"single-spa-angularjs another helper library that implements the necessary lifecycle hooks, which simplifies the configuration. Learn more about the ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/ecosystem-angularjs#options"},"single-spa-angularjs options"),"."),(0,r.kt)("p",null,"Just as we did for our ",(0,r.kt)("strong",{parentName:"p"},"home")," and ",(0,r.kt)("strong",{parentName:"p"},"navBar")," applications, set up the lifecycle hooks for the ",(0,r.kt)("strong",{parentName:"p"},"angularJS")," in the ",(0,r.kt)("em",{parentName:"p"},"angularJS.app.js")," file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="angularJS.app.js"',title:'"angularJS.app.js"'},"import singleSpaAngularJS from 'single-spa-angularjs';\nimport angular from 'angular';\nimport './app.module.js';\nimport './routes.js';\n\nconst domElementGetter = () => document.getElementById('angularJS');\n\nconst angularLifecycles = singleSpaAngularJS({\n  angular,\n  domElementGetter,\n  mainAngularModule: 'angularJS-app',\n  uiRouter: true,\n  preserveGlobal: false,\n});\n\nexport const bootstrap = [angularLifecycles.bootstrap];\n\nexport const mount = [angularLifecycles.mount];\n\nexport const unmount = [angularLifecycles.unmount];\n")),(0,r.kt)("h3",{id:"6d-set-up-the-angularjs-application"},"6.d Set up the AngularJS application"),(0,r.kt)("p",null,"Now that we have registered our application and set up the lifecycle methods pointing to our main Angular module, we can begin to flesh out the application."),(0,r.kt)("p",null,"To start, we will build ",(0,r.kt)("em",{parentName:"p"},"app.module.js")," followed by ",(0,r.kt)("em",{parentName:"p"},"root.component.js")," which will set the root of the ",(0,r.kt)("strong",{parentName:"p"},"angularJS")," application using ",(0,r.kt)("em",{parentName:"p"},"root.template.html")," as the template."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="app.module.js"',title:'"app.module.js"'},"import angular from 'angular';\nimport 'angular-ui-router';\n\nangular.module('angularJS-app', ['ui.router']);\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="root.component.js"',title:'"root.component.js"'},"import angular from 'angular';\nimport template from './root.template.html';\n\nangular.module('angularJS-app').component('root', {\n  template,\n});\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="root.template.html"',title:'"root.template.html"'},'<div ng-style="vm.styles">\n  <div class="container">\n    <div class="row">\n      <h4 class="light">\n        Angular 1 example\n      </h4>\n      <p class="caption">\n        This is a sample application written with Angular 1.5 and\n        angular-ui-router.\n      </p>\n    </div>\n    <div>\n      \x3c!-- These Routes will be set up in the routes.js file --\x3e\n      <a\n        class="waves-effect waves-light btn-large"\n        href="/angularJS/gifs"\n        style="margin-right: 10px"\n      >\n        Show me cat gifs\n      </a>\n      <a\n        class="waves-effect waves-light btn-large"\n        href="/angularJS"\n        style="margin-right: 10px"\n      >\n        Take me home\n      </a>\n    </div>\n    <div class="row">\n      <ui-view />\n    </div>\n  </div>\n</div>\n')),(0,r.kt)("p",null,"Next we will add a basic Gif Component and import it in the root component."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="gifs.component.js"',title:'"gifs.component.js"'},"import angular from 'angular';\nimport template from './gifs.template.html';\n\nangular.module('angularJS-app').component('gifs', {\n  template,\n  controllerAs: 'vm',\n  controller($http) {\n    const vm = this;\n\n    $http\n      .get('https://api.giphy.com/v1/gifs/search?q=cat&api_key=dc6zaTOxFJmzC')\n      .then(response => {\n        vm.gifs = response.data.data;\n      })\n      .catch(err => {\n        setTimeout(() => {\n          throw err;\n        }, 0);\n      });\n  },\n});\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="gifs.template.html"',title:'"gifs.template.html"'},'<div style="padding-top: 20px">\n  <h4 class="light">\n    Cat Gifs gifs\n  </h4>\n  <p></p>\n  <div ng-repeat="gif in vm.gifs" style="margin: 5px;">\n    <img ng-src="{{gif.images.downsized_medium.url}}" class="col l3" />\n  </div>\n</div>\n')),(0,r.kt)("h3",{id:"6e-set-up-in-app-routing"},"6.e Set up in-app routing"),(0,r.kt)("p",null,"Now that we have each of our components built out, all we have left to do is connect them. We will do this by importing both into ",(0,r.kt)("em",{parentName:"p"},"routes.js"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="routes.js"',title:'"routes.js"'},"import angular from 'angular';\nimport './root.component.js';\nimport './gifs.component.js';\n\nangular.module('angularJS-app').config(($stateProvider, $locationProvider) => {\n  $locationProvider.html5Mode({\n    enabled: true,\n    requireBase: false,\n  });\n\n  $stateProvider\n    .state('root', {\n      url: '/angularJS',\n      template: '<root />',\n    })\n\n    .state('root.gifs', {\n      url: '/gifs',\n      template: '<gifs />',\n    });\n});\n")),(0,r.kt)("h2",{id:"finished"},"Finished!"),(0,r.kt)("p",null,"From the root directory run ",(0,r.kt)("inlineCode",{parentName:"p"},"yarn start")," to check out your new single-spa project."),(0,r.kt)("p",null,"We hope this tutorial gives you experience building and implementing micro frontends using single-spa. Review this guide periodically and use it as a reference in your projects. If you still have questions about how to use single-spa with your specific build, check out the migration tutorials: for ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/migrating-angularJS-tutorial"},"AngularJS")," and ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/migrating-react-tutorial"},"React"),"."),(0,r.kt)("p",null,"As always, there is more to be learned. If you want to learn how to use single-spa with Angular, Vue, or other frameworks/build systems, checkout the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/single-spa/single-spa-examples"},(0,r.kt)("inlineCode",{parentName:"a"},"single-spa-examples"))," repo. Lastly, you may also want to study how to ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/separating-applications"},"separate applications")," using single-spa."))}d.isMDXComponent=!0}}]);