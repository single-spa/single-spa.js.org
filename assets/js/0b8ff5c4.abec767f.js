"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1586],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return h}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var r=a.createContext({}),s=function(e){var t=a.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},d=function(e){var t=s(e.components);return a.createElement(r.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,r=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=s(n),u=i,h=m["".concat(r,".").concat(u)]||m[u]||c[u]||l;return n?a.createElement(h,p(p({ref:t},d),{},{components:n})):a.createElement(h,p({ref:t},d))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,p=new Array(l);p[0]=u;var o={};for(var r in t)hasOwnProperty.call(t,r)&&(o[r]=t[r]);o.originalType=e,o[m]="string"==typeof e?e:i,p[1]=o;for(var s=2;s<l;s++)p[s]=n[s];return a.createElement.apply(null,p)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},406:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return r},default:function(){return u},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return m}});var a=n(7462),i=n(3366),l=(n(7294),n(3905)),p=["components"],o={id:"ecosystem-alpinejs",title:"single-spa-alpinejs",sidebar_label:"AlpineJS"},r=void 0,s={unversionedId:"ecosystem-alpinejs",id:"version-6.x/ecosystem-alpinejs",title:"single-spa-alpinejs",description:"single-spa-alpinejs is a helper library for mounting alpinejs components as",source:"@site/versioned_docs/version-6.x/ecosystem-alpinejs.md",sourceDirName:".",slug:"/ecosystem-alpinejs",permalink:"/docs/ecosystem-alpinejs",draft:!1,editUrl:"https://github.com/single-spa/single-spa.js.org/blob/master/website/versioned_docs/version-6.x/ecosystem-alpinejs.md",tags:[],version:"6.x",frontMatter:{id:"ecosystem-alpinejs",title:"single-spa-alpinejs",sidebar_label:"AlpineJS"},sidebar:"version-6.x/docs",previous:{title:"Dojo",permalink:"/docs/ecosystem-dojo"},next:{title:"Vite",permalink:"/docs/ecosystem-vite"}},d={},m=[{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"<em>1 - Template Only</em>",id:"1---template-only",level:3},{value:"<em>2 - Template with externally defined <code>x-data</code></em>",id:"2---template-with-externally-defined-x-data",level:3},{value:"<em>3 - Template with externally defined <code>x-data</code> with <code>x-init</code></em>",id:"3---template-with-externally-defined-x-data-with-x-init",level:3},{value:"Usage Examples",id:"usage-examples",level:3},{value:"<em>1 - Template Only</em>",id:"1---template-only-1",level:4},{value:"Via cdn",id:"via-cdn",level:4},{value:"<em>2 - Template with externally defined <code>x-data</code></em>",id:"2---template-with-externally-defined-x-data-1",level:4},{value:"<em>3 - Template with externally defined <code>x-data</code> with <code>x-init</code></em>",id:"3---template-with-externally-defined-x-data-with-x-init-1",level:4},{value:"API / Options",id:"api--options",level:2},{value:"xData and xInit Handling",id:"xdata-and-xinit-handling",level:3}],c={toc:m};function u(e){var t=e.components,n=(0,i.Z)(e,p);return(0,l.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/single-spa/single-spa-alpinejs"},"single-spa-alpinejs")," is a helper library for mounting ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/alpinejs/alpine/"},"alpinejs")," components as\nsingle-spa applications or parcels."),(0,l.kt)("h2",{id:"installation"},"Installation"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"npm install --save single-spa-alpinejs\n\n# or\nyarn add single-spa-alpinejs\n")),(0,l.kt)("p",null,"Alternatively, you can use single-spa-alpinejs from a CDN as a global variable:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://cdn.jsdelivr.net/npm/single-spa-alpinejs"><\/script>\n')),(0,l.kt)("p",null,"Note that you might want to lock down the package to a specific version. See ",(0,l.kt)("a",{parentName:"p",href:"https://cdn.jsdelivr.net/npm/single-spa-alpinejs"},"here")," for\nhow to do that."),(0,l.kt)("h2",{id:"usage"},"Usage"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"There are three ways the you can define AlpineJS components as single-spa applications or parcels.")),(0,l.kt)("h3",{id:"1---template-only"},(0,l.kt)("em",{parentName:"h3"},"1 - Template Only")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"The simplest way where the template contains all the required data and initialization logic (including ",(0,l.kt)("inlineCode",{parentName:"li"},"x-data")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"x-init"),") as part of the dom. The template is provided via the options attribute ",(0,l.kt)("inlineCode",{parentName:"li"},"template"))),(0,l.kt)("h3",{id:"2---template-with-externally-defined-x-data"},(0,l.kt)("em",{parentName:"h3"},"2 - Template with externally defined ",(0,l.kt)("inlineCode",{parentName:"em"},"x-data"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"You could also provide ",(0,l.kt)("inlineCode",{parentName:"li"},"x-data")," externally and the helper will add it to the component.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"The ",(0,l.kt)("inlineCode",{parentName:"li"},"x-data")," can be provided in the following forms (via the options attribute ",(0,l.kt)("inlineCode",{parentName:"li"},"xData"),")",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"an object"),(0,l.kt)("li",{parentName:"ul"},"a function that returns an object"),(0,l.kt)("li",{parentName:"ul"},"a function that returns a promise which resolves with an object.")))))),(0,l.kt)("h3",{id:"3---template-with-externally-defined-x-data-with-x-init"},(0,l.kt)("em",{parentName:"h3"},"3 - Template with externally defined ",(0,l.kt)("inlineCode",{parentName:"em"},"x-data")," with ",(0,l.kt)("inlineCode",{parentName:"em"},"x-init"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"You can also provide ",(0,l.kt)("inlineCode",{parentName:"p"},"x-init")," externally along with the ",(0,l.kt)("inlineCode",{parentName:"p"},"x-data")," and the helper will add it to the component.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The ",(0,l.kt)("inlineCode",{parentName:"p"},"x-init")," can be provided in the following forms (via the options attribute ",(0,l.kt)("inlineCode",{parentName:"p"},"xInit"),") and needs to be a function.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Please note the ",(0,l.kt)("inlineCode",{parentName:"p"},"xData")," attribute ",(0,l.kt)("em",{parentName:"p"},"must")," be provided otherwise the ",(0,l.kt)("inlineCode",{parentName:"p"},"xInit")," attribute will be ignored.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The sample below references the example from the ",(0,l.kt)("a",{parentName:"p",href:"https://www.alpinetoolbox.com/examples/"},"Alpine Toolbox - Alpine JS and fetch()")," and demonstrates how you can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"xInit")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"xData")," attributes to create an AlpineJS application ."))),(0,l.kt)("h3",{id:"usage-examples"},"Usage Examples"),(0,l.kt)("h4",{id:"1---template-only-1"},(0,l.kt)("em",{parentName:"h4"},"1 - Template Only")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'import singleSpaAlpinejs from \'single-spa-alpinejs\';\n\nconst alpinejslifecycles = singleSpaAlpinejs({\n  template: `\n    <div class="rounded overflow-hidden shadow-lg font-sans p-1 m-1" \n         x-data="{ open: false }">\n      <div class="font-bold p-1">Example for x-show attribute</div>\n      <button class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold \n              hover:text-white py-2 px-4 border border-blue-500 \n              hover:border-transparent rounded" \n              @click="open = !open">Open/Close</button>\n      <div x-show="open" class="text-4xl">\n          Hey, I\'m open\n      </div>\n    </div>`,\n});\n\nexport const bootstrap = alpinejslifecycles.bootstrap;\nexport const mount = alpinejslifecycles.mount;\nexport const unmount = alpinejslifecycles.unmount;\n')),(0,l.kt)("h4",{id:"via-cdn"},"Via cdn"),(0,l.kt)("p",null,"Example usage when installed via CDN:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"The usage is similar and once the library is loaded it will be available globally and accessed via the ",(0,l.kt)("inlineCode",{parentName:"li"},"window")," object.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const alpinejsApp = window.singleSpaAlpinejs({\n  template: `\n    <div class="rounded overflow-hidden shadow-lg font-sans p-1 m-1" \n         x-data="{ open: false }">\n      <div class="font-bold p-1">Example for x-show attribute</div>\n      <button class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold \n      hover:text-white py-2 px-4 border border-blue-500 \n      hover:border-transparent rounded" @click="open = !open">Open/Close</button>\n      <div x-show="open" class="text-4xl">\n          Hey, I\'m open\n      </div>\n    </div>`,\n});\n\nsingleSpa.registerApplication({\n  name: \'name\',\n  app: alpinejsApp,\n  activeWhen: () => true,\n});\n')),(0,l.kt)("h4",{id:"2---template-with-externally-defined-x-data-1"},(0,l.kt)("em",{parentName:"h4"},"2 - Template with externally defined ",(0,l.kt)("inlineCode",{parentName:"em"},"x-data"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'import singleSpaAlpinejs from \'single-spa-alpinejs\';\n\nconst alpinejslifecycles = singleSpaAlpinejs({\n  template: `\n    <div class="rounded overflow-hidden shadow-lg font-sans p-1 m-1">\n      <div class="font-bold p-1">Example for x-show attribute</div>\n      <button class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold \n      hover:text-white py-2 px-4 border border-blue-500 \n      hover:border-transparent rounded" @click="open = !open">Open/Close</button>\n      <div x-show="open" class="text-4xl">\n          Hey, I\'m open\n      </div>\n    </div>`,\n  xData: { open: false },\n});\n\nexport const bootstrap = alpinejslifecycles.bootstrap;\nexport const mount = alpinejslifecycles.mount;\nexport const unmount = alpinejslifecycles.unmount;\n')),(0,l.kt)("h4",{id:"3---template-with-externally-defined-x-data-with-x-init-1"},(0,l.kt)("em",{parentName:"h4"},"3 - Template with externally defined ",(0,l.kt)("inlineCode",{parentName:"em"},"x-data")," with ",(0,l.kt)("inlineCode",{parentName:"em"},"x-init"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'import singleSpaAlpinejs from \'single-spa-alpinejs\';\n\nconst appTemplate = `\n    <div class="w-full h-full text-gray-800">\n        <h1 class="mt-0 mb-3 font-light text-3xl" x-text="title">\x3c!-- title text --\x3e</h1>\n        <p class="text-xl text-gray-600 font-light mb-4" x-html="intro">\x3c!-- intro text --\x3e</p>\n        <div class="flex flex-wrap -mx-2 pb-8">\n        \x3c!-- begin: user card --\x3e\n        <template x-for="user in users" :key="user.id">\n            <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 h-auto font-light">\n            <div class="flex bg-white rounded-lg shadow-md m-2 border-l-4 \n                        border-white hover:shadow-2xl hover:border-pink-500 \n                        cursor-pointer relative">\n                <div class="p-4 pr-6 leading-normal">\n                <div class="font-medium text-xl truncate" x-text="user.name"></div>\n                <div class="truncate uppercase text-xs text-gray-500 font-semibold \n                pb-2 tracking-widest" x-text="user.company.name"></div>\n                <div class="" x-text="user.phone"></div>\n                <a class="text-blue-600 hover:text-blue-700 mr-4 block"     \n                    x-bind:href="\'mailto:\' + user.email" x-text="user.email"></a>     \n                <a class="text-blue-600 hover:text-blue-700 block" \n                x-bind:href="\'https://\' + user.website" x-text="user.website"></a>\n                </div>\n            </div>\n            </div>\n        </template>\n        \x3c!-- end: user card --\x3e\n        </div>\n    </div>\n  `;\n\nconst appDataFn = ({ title, name }) => ({\n  title,\n  intro:\n    \'Implement a simple <code class="text-md text-pink-600">fetch()</code> request to render a list of items using Alpine.js :)\',\n  users: [],\n  open: false,\n  name,\n});\n\nconst appXInitFn = (id) => {\n  return fetch(\'https://jsonplaceholder.typicode.com/users\')\n    .then((response) => response.json())\n    .then((data) => (document.querySelector(`#${id}`).__x.$data.users = data));\n};\n\nconst opts = {\n  template: appTemplate,\n  xData: (data) => appDataFn(data), // pass props to x-data\n  xInit: appXInitFn,\n};\n\nconst alpinejslifecycles = singleSpaAlpinejs(opts);\n\nexport const bootstrap = alpinejslifecycles.bootstrap;\nexport const mount = alpinejslifecycles.mount;\nexport const unmount = alpinejslifecycles.unmount;\n')),(0,l.kt)("h2",{id:"api--options"},"API / Options"),(0,l.kt)("p",null,"single-spa-html is called with an object that has the following properties:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"template")," (required): An HTML string or a function that returns a string. The function will be called with the single-spa custom props. The returned string is injected into the DOM during the single-spa mount lifecycle."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"domElementGetter")," (optional): A function that returns the dom element container into which the HTML will be injected. If omitted,\na default implementation is provided that wraps the template in a ",(0,l.kt)("inlineCode",{parentName:"li"},"<div>")," that is appended to ",(0,l.kt)("inlineCode",{parentName:"li"},"document.body"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xData")," (optional): An object or a function or a function that returns a promise.The returned string is injected into the DOM as the ",(0,l.kt)("inlineCode",{parentName:"li"},"x-data")," attribute during the single-spa mount lifecycle."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xInit")," (optional): A function or a function that returns a promise. The function provided is added to the global scope and the function initiation along with the root dom element id as a parameter is injected into the DOM as the ",(0,l.kt)("inlineCode",{parentName:"li"},"x-init")," attribute during the single-spa mount lifecycle. Please note the ",(0,l.kt)("inlineCode",{parentName:"li"},"xData")," attribute ",(0,l.kt)("em",{parentName:"li"},"must")," be provided otherwise the ",(0,l.kt)("inlineCode",{parentName:"li"},"xInit")," attribute will be ignored. The function you provide ",(0,l.kt)("inlineCode",{parentName:"li"},"xInit"))),(0,l.kt)("h3",{id:"xdata-and-xinit-handling"},"xData and xInit Handling"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"This section covers the details of how ",(0,l.kt)("inlineCode",{parentName:"p"},"xData")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"xInit")," option attributes are processed by the single spa helper.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Consider the example below"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const appDataFn = () => { open: false, loading: true }\nconst appXInitFn = (domId) => {\n    console.log('Hello from appXInitFn');\n  // domId provides access to the parent dom element where x-data and x-init are defined\n    document.querySelector(`#${domId}`).__x.$data.loading = false\n}\n\nconst opts = {\n  template: appTemplate,              // base template\n  xData: (data) => appDataFn(data), // pass props to x-data\n  xInit: appXInitFn,                    // x-Init function\n};\n\nconst alpinejsApp = singleSpaAlpinejs(opts);\n\nsingleSpa.registerApplication({\n  name: 'myapp',\n  app: alpinejsApp,\n  activeWhen: () => true,\n});\n\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The helper does the following "),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Adds the template to the dom wrapped in ",(0,l.kt)("inlineCode",{parentName:"li"},"parent dom element")," with and id that has a prefix of ",(0,l.kt)("inlineCode",{parentName:"li"},"alpine"),". In this case it will be ",(0,l.kt)("inlineCode",{parentName:"li"},"id='alpine-myapp'")," "),(0,l.kt)("li",{parentName:"ul"},"Attaches a resolved ",(0,l.kt)("inlineCode",{parentName:"li"},"xData")," as a string ",(0,l.kt)("inlineCode",{parentName:"li"},'x-data="{ "name": "myapp" ,"open": false }"')," to the ",(0,l.kt)("inlineCode",{parentName:"li"},"parent dom element"),". "),(0,l.kt)("li",{parentName:"ul"},"It will make the user defined ",(0,l.kt)("inlineCode",{parentName:"li"},"appXInitFn")," available globally as an attribute of ",(0,l.kt)("inlineCode",{parentName:"li"},"window.singleSpaAlpineXInit")," and will be accessible via variable ",(0,l.kt)("inlineCode",{parentName:"li"},"window.singleSpaAlpineXInit.myapp")," "),(0,l.kt)("li",{parentName:"ul"},"Attaches a resolved ",(0,l.kt)("inlineCode",{parentName:"li"},"xInit")," as a string that calls the globally defined variable ",(0,l.kt)("inlineCode",{parentName:"li"},"x-init=\"singleSpaAlpineXInit.myapp('alpine-myapp')\"")," to the ",(0,l.kt)("inlineCode",{parentName:"li"},"parent dom element"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Note")," that this also passes ",(0,l.kt)("inlineCode",{parentName:"li"},"id")," of the ",(0,l.kt)("inlineCode",{parentName:"li"},"parent dom element")," which can then be used to access the alpine data elements to update the state as required.")),(0,l.kt)("h4",{parentName:"li",id:"special-characters-in-the-application-names"},"Special characters in the application names"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"You may have special characters in the application name for example ",(0,l.kt)("inlineCode",{parentName:"li"},"@my/app"),". See the example below")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"    singleSpa.registerApplication({\n    name: '@my/app',\n    app: alpinejsApp,\n    activeWhen: () => true,\n        });\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The single spa helper converts these to valid ",(0,l.kt)("inlineCode",{parentName:"p"},"global")," function names by ",(0,l.kt)("inlineCode",{parentName:"p"},"replacing")," ",(0,l.kt)("inlineCode",{parentName:"p"},"all the special characters")," with underscores (",(0,l.kt)("inlineCode",{parentName:"p"},"_"),"). This does not require any special handling from the user as the helper takes care of this internally")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"In the above case the ",(0,l.kt)("inlineCode",{parentName:"p"},"xInit")," dom element would look like the following ",(0,l.kt)("inlineCode",{parentName:"p"},"x-init=\"singleSpaAlpineXInit._my_app('alpine-@my/app')\"")," where the ",(0,l.kt)("inlineCode",{parentName:"p"},"xInit")," function is available as a ",(0,l.kt)("inlineCode",{parentName:"p"},"global")," variable ",(0,l.kt)("inlineCode",{parentName:"p"},"_my_app"),"."))))))}u.isMDXComponent=!0}}]);