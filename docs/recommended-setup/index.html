<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-6.x docs-doc-page docs-doc-id-recommended-setup" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">The Recommended Setup | single-spa</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://single-spa.js.org/img/docusaurus.png"><meta data-rh="true" name="twitter:image" content="https://single-spa.js.org/img/docusaurus.png"><meta data-rh="true" property="og:url" content="https://single-spa.js.org/docs/recommended-setup"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="6.x"><meta data-rh="true" name="docusaurus_tag" content="docs-default-6.x"><meta data-rh="true" name="docsearch:version" content="6.x"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-6.x"><meta data-rh="true" property="og:title" content="The Recommended Setup | single-spa"><meta data-rh="true" name="description" content="The single-spa npm package is not opinionated about your build tools, CI process, or local development workflow. However, to implement single-spa you will have to figure all of those things out (and more). To help you decide how to approach these problems, the single-spa core team has put together a &quot;recommended setup&quot; that gives an opinionated approach to solving the practical problems of microfrontends."><meta data-rh="true" property="og:description" content="The single-spa npm package is not opinionated about your build tools, CI process, or local development workflow. However, to implement single-spa you will have to figure all of those things out (and more). To help you decide how to approach these problems, the single-spa core team has put together a &quot;recommended setup&quot; that gives an opinionated approach to solving the practical problems of microfrontends."><link data-rh="true" rel="icon" href="/img/single-spa-mark-magenta.svg"><link data-rh="true" rel="canonical" href="https://single-spa.js.org/docs/recommended-setup"><link data-rh="true" rel="alternate" href="https://single-spa.js.org/docs/recommended-setup" hreflang="en"><link data-rh="true" rel="alternate" href="https://single-spa.js.org/docs/recommended-setup" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FWAC4N89WA-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="single-spa RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="single-spa Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-138683004-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>



<link rel="search" type="application/opensearchdescription+xml" title="single-spa" href="/opensearch.xml">
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script src="/js/index.js"></script><link rel="stylesheet" href="/assets/css/styles.e320bee3.css">
<script src="/assets/js/runtime~main.bf2e1980.js" defer="defer"></script>
<script src="/assets/js/main.0ac5686d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/single-spa-mark-magenta.svg" alt="single-spa Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/single-spa-mark-magenta.svg" alt="single-spa Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">single-spa</b></a><a class="navbar__item navbar__link" style="white-space:nowrap;padding:0.25rem 0.5rem 0.2rem 0.25rem;font-size:calc(0.9 * var(--ifm-font-size-base));text-decoration:underline" href="/versions">6.x</a><a class="navbar__item navbar__link" href="/docs/faq/">FAQ</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://single-spa-workshop.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Courses</a><a class="navbar__item navbar__link" href="/help/">Help</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a href="https://opencollective.com/single-spa" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Donate<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/single-spa/single-spa" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/languages">简Жहि Languages</a></div><div class="navbar__items navbar__items--right"><a href="https://baseplate.cloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Deploy</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/getting-started-overview">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/examples">Examples</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://single-spa-workshop.com" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://baseplate.cloud" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false">Hosting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/create-single-spa">CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/microfrontends-concept">Concept: Microfrontend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/configuration">Concept: Root Config</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/building-applications">Concept: Application</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/parcels-overview">Concept: Parcel</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/testing/units">Testing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/layout-overview">Layout Engine</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/recommended-setup">The Recommended Setup</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/recommended-setup">Overview</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/api">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/ecosystem">Ecosystem</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/ssr-overview">Server Side Rendering (New)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/devtools">Dev Tools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/contributing-overview">Contributing</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">The Recommended Setup</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Overview</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 6.x</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>The Recommended Setup</h1></header><p>The single-spa npm package is not opinionated about your build tools, CI process, or local development workflow. However, to implement single-spa you will have to figure all of those things out (and more). To help you decide how to approach these problems, the single-spa core team has put together a &quot;recommended setup&quot; that gives an opinionated approach to solving the practical problems of microfrontends.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>We recommend a setup that uses in-browser ES modules + import maps (or SystemJS to polyfill these if you need better browser support). This setup has several advantages:</p>
<ol>
<li>Common libraries are easy to manage, and are only downloaded once. If you&#x27;re using SystemJS, you can also preload them for a speed boost as well.</li>
<li>Sharing code / functions / variables is as easy as import/export, just like in a monolithic setup</li>
<li>Lazy loading applications is easy, which enables you to speed up initial load times</li>
<li>Each application (AKA microservice, AKA ES module) can be independently developed and deployed. Teams are enabled to work at their own speed, experiment (within reason as defined by the organization), QA, and deploy on their own schedules. This usually also means that release cycles can be decreased to days instead of weeks or months</li>
<li>A great developer experience (DX): go to your dev environment and add an import map that points the application&#x27;s url to your localhost. See sections below for details</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="alternatives">Alternatives<a href="#alternatives" class="hash-link" aria-label="Direct link to Alternatives" title="Direct link to Alternatives">​</a></h2>
<ul>
<li><a href="https://github.com/umijs/qiankun" target="_blank" rel="noopener noreferrer">qiankun</a> is a popular alternative to this recommended setup.</li>
<li><a href="https://github.com/namecheap/ilc" target="_blank" rel="noopener noreferrer">Isomorphic Layout Composer</a> - complete solution for Micro Frontends composition into SPA with SSR support</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-browser-versus-build-time-modules">In-browser versus build-time modules<a href="#in-browser-versus-build-time-modules" class="hash-link" aria-label="Direct link to In-browser versus build-time modules" title="Direct link to In-browser versus build-time modules">​</a></h2>
<p>Tutorial video: <a href="https://www.youtube.com/watch?v=Jxqiu6pdMSU&amp;list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU&amp;index=2" target="_blank" rel="noopener noreferrer">Youtube</a> / <a href="https://www.bilibili.com/video/av83498486/" target="_blank" rel="noopener noreferrer">Bilibili</a></p>
<p>An in-browser JavaScript module is when imports and exports are not compiled away by your build tool, but instead are
resolved within the browser. This is different from build-time modules, which are supplied by your node_modules and
compiled away before they touch the browser.</p>
<p>The way to tell webpack and rollup to leave some dependencies untouched during the build, so that they come from the browser,
is via <a href="https://webpack.js.org/configuration/externals/#root" target="_blank" rel="noopener noreferrer">webpack externals</a> and <a href="https://rollupjs.org/guide/en/#external" target="_blank" rel="noopener noreferrer">rollup externals</a>.</p>
<p>Here are our recommendations:</p>
<ol>
<li>Each single-spa application should be an in-browser Javascript module.</li>
<li>Each large shared-dependency (ie, the react, vue, or angular libraries) should also be an in-browser module.</li>
<li>Everything else should be a build-time module.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="import-maps">Import Maps<a href="#import-maps" class="hash-link" aria-label="Direct link to Import Maps" title="Direct link to Import Maps">​</a></h2>
<p>Tutorial video: <a href="https://www.youtube.com/watch?v=Lfm2Ge_RUxs&amp;list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU&amp;index=3" target="_blank" rel="noopener noreferrer">Youtube</a> / <a href="https://www.bilibili.com/video/av83617496/" target="_blank" rel="noopener noreferrer">Bilibili</a></p>
<p><a href="https://github.com/WICG/import-maps" target="_blank" rel="noopener noreferrer">Import Maps</a> are a browser specification for aliasing &quot;import specifiers&quot; to a URL.
An import specifier is the string indicating which module to load. Examples:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ./thing.js is the import specifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">thing</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./thing.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// react is the import specifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;react&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Specifiers that are not a URL are called &quot;bare specifiers,&quot; such as <code>import &#x27;react&#x27;</code>. Being able to alias bare specifiers to a URL
is crucial to being able to use in-browser modules, which is why import maps exist.</p>
<p>Import Maps are not supported in all browsers. See <a href="https://caniuse.com/import-maps" target="_blank" rel="noopener noreferrer">https://caniuse.com/import-maps</a> for more detail. You can use <a href="https://github.com/systemjs/systemjs" target="_blank" rel="noopener noreferrer">SystemJS</a> or <a href="https://github.com/guybedford/es-module-shims" target="_blank" rel="noopener noreferrer">es-module-shims</a> to polyfill support for import maps.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="module-federation">Module Federation<a href="#module-federation" class="hash-link" aria-label="Direct link to Module Federation" title="Direct link to Module Federation">​</a></h2>
<p><a href="https://dev.to/marais/webpack-5-and-module-federation-4j1i" target="_blank" rel="noopener noreferrer">Module Federation</a> is a webpack-specific technique for sharing <a href="#in-browser-versus-build-time-modules">build-time modules</a>. It involves each microfrontend bundling all of its dependencies, even the shared ones. This means that there are multiple copies of each shared dependency - one per microfrontend. In the browser, the first copy of the shared dependency will be downloaded, but subsequent microfrontends will reuse that shared dependency without downloading their copy of it.</p>
<p>Note that Module Federation is a new feature (at the time of this writing) and requires that you use webpack@&gt;=5. It is still an evolving technology.</p>
<p>single-spa is a way of structuring your routes for microfrontends. Module Federation is a performance technique for microfrontends. They complement each other well and can be used together. Here is a <a href="https://www.youtube.com/watch?v=wxnwPLLIJCY" target="_blank" rel="noopener noreferrer">YouTube video</a> by a community member that talks about using single-spa and module federation together.</p>
<p>With module federation, you must choose how you wish to load the microfrontends themselves. The single-spa core team recommends using SystemJS + import maps as a module loader for the microfrontends. Alternatively, you may use global variables and <code>&lt;script&gt;</code> elements. An example of using SystemJS to load microfrontends with module federation can be found at <a href="https://github.com/ScriptedAlchemy/mfe-webpack-demo/pull/2" target="_blank" rel="noopener noreferrer">https://github.com/ScriptedAlchemy/mfe-webpack-demo/pull/2</a>.</p>
<p>The single-spa core team recommends choosing either import maps or module federation for your shared, third-party dependencies. We do not recommend sharing some third-party dependencies via import map and others via module federation. When choosing between the two approaches, we have a preference towards import maps, but no objection to module federation. See the <a href="#shared-dependencies">shared dependencies section</a> for a comparison.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="systemjs">SystemJS<a href="#systemjs" class="hash-link" aria-label="Direct link to SystemJS" title="Direct link to SystemJS">​</a></h2>
<p>Tutorial video: <a href="https://www.youtube.com/watch?v=AmdKF2UhFzw&amp;list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU&amp;index=7" target="_blank" rel="noopener noreferrer">Youtube</a> / <a href="https://www.bilibili.com/video/av83620028/" target="_blank" rel="noopener noreferrer">Bilibili</a></p>
<p>SystemJS provides polyfill-like behavior for import maps and in-browser modules. It is not a true polyfill of import maps, due to limitations of the JavaScript language in polyfilling the resolution of bare import specifiers to URLs.</p>
<p>Since SystemJS is only polyfill-like, you&#x27;ll need to compile your applications into <a href="https://github.com/systemjs/systemjs/blob/master/docs/system-register.md" target="_blank" rel="noopener noreferrer">System.register format</a> instead of to ESM format. This allows for in-browser modules to be fully emulated in environments that don&#x27;t support modules or import maps.</p>
<p>To compile your code to System.register format, set webpack&#x27;s <a href="https://webpack.js.org/configuration/output/#outputlibrarytarget" target="_blank" rel="noopener noreferrer"><code>output.libraryTarget</code></a> to <code>&quot;system&quot;</code>, or set rollup&#x27;s <a href="https://rollupjs.org/guide/en/#outputformat" target="_blank" rel="noopener noreferrer"><code>format</code></a> to <code>&quot;system&quot;</code>.</p>
<p>Shared dependencies like React, Vue, and Angular, do not publish System.register versions of their libraries. However, you can find System.register versions of the libraries in <a href="https://github.com/esm-bundle" target="_blank" rel="noopener noreferrer">the esm-bundle project</a> (<a href="https://medium.com/@joeldenning/an-esm-bundle-for-any-npm-package-5f850db0e04d" target="_blank" rel="noopener noreferrer">blog post</a>). Alternatively, SystemJS is capable of loading them via <a href="https://github.com/systemjs/systemjs#2-systemjs-loader" target="_blank" rel="noopener noreferrer">global loading</a> or <a href="https://github.com/systemjs/systemjs#extras" target="_blank" rel="noopener noreferrer">the AMD and named-exports extras</a>.</p>
<p>Another resource for sharing dependencies is the <a href="https://github.com/single-spa/self-hosted-shared-dependencies" target="_blank" rel="noopener noreferrer">self-hosted-shared-dependencies</a> project.</p>
<p>An alternative to SystemJS that provides polyfill behavior for import maps is <a href="https://github.com/guybedford/es-module-shims" target="_blank" rel="noopener noreferrer">es-module-shims</a>. This has the advantage of using truly native ES modules. However, it is not the single-spa core team&#x27;s recommended approach for production applications, since it requires less-performant in browser parsing and modification of all your bundles.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lazy-loading">Lazy loading<a href="#lazy-loading" class="hash-link" aria-label="Direct link to Lazy loading" title="Direct link to Lazy loading">​</a></h2>
<p>Tutorial video: <a href="https://www.youtube.com/watch?v=-LkvBMpCK-A&amp;list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU&amp;index=8" target="_blank" rel="noopener noreferrer">Youtube</a> / <a href="https://www.bilibili.com/video/av83620658/" target="_blank" rel="noopener noreferrer">Bilibili</a></p>
<p>Lazy loading is when you only download JavaScript code that the user needs for the current page, instead of all JavaScript up front. It is a technique for improving the performance of your application by decreasing the time-to-meaningful-render when you initially load the page. If you use <a href="/docs/configuration#loading-function-or-application">single-spa loading functions</a>, you already have built-in lazy loading for your applications and parcels. Since an application is an &quot;in-browser module,&quot; this means that you are only downloading the in-browser modules in your import map when you need them.</p>
<p>Often, the route-based lazy loading provided by single-spa loading functions is all that you need to ensure great performance. However, it is also possible to do lazy loading via &quot;code splits&quot; with your bundler (webpack or rollup). For documentation on webpack code splits, see <a href="https://webpack.js.org/guides/code-splitting/#dynamic-imports" target="_blank" rel="noopener noreferrer">these docs</a>. It is recommended to use dynamic import (<code>import()</code>) instead of multiple entry points for code splits in a single-spa application. For code splits to work properly, you&#x27;ll need to <a href="https://webpack.js.org/guides/public-path/#on-the-fly" target="_blank" rel="noopener noreferrer">dynamically set your public path</a>. A tool exists to help you set your public path correctly for use with systemjs - <a href="https://github.com/joeldenning/systemjs-webpack-interop" target="_blank" rel="noopener noreferrer">https://github.com/joeldenning/systemjs-webpack-interop</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="local-development">Local development<a href="#local-development" class="hash-link" aria-label="Direct link to Local development" title="Direct link to Local development">​</a></h2>
<p>Tutorial video: <a href="https://www.youtube.com/watch?v=vjjcuIxqIzY&amp;list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU&amp;index=4" target="_blank" rel="noopener noreferrer">Youtube</a> / <a href="https://www.bilibili.com/video/av83617789/" target="_blank" rel="noopener noreferrer">Bilibili</a></p>
<p>In contrast to monolithic frontend applications, local development with single-spa encourages only running the one microfrontend you&#x27;re working on, while using deployed versions of all other microfrontends. This is important because running every single-spa microfrontend every time you want to do anything is unwieldy and cumbersome.</p>
<p>To accomplish local development of only one microfrontend at a time, we can customize the URL for that microfrontend within the import map. For example, the following import map is set up for local development of the <code>navbar</code> application, since that&#x27;s the only one pointing to a local web server. The <code>planets</code> and <code>things</code> applications are pointing to deployed (already hosted) versions of the applications.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;imports&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;@react-mf/navbar&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://localhost:8080/react-mf-navbar.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;@react-mf/planets&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://react.microfrontends.app/planets/2717466e748e53143474beb6baa38e3e5320edd7/react-mf-planets.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;@react-mf/things&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://react.microfrontends.app/things/7f209a1ed9ac9690835c57a3a8eb59c17114bb1d/react-mf-things.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A tool called <a href="https://github.com/joeldenning/import-map-overrides" target="_blank" rel="noopener noreferrer">import-map-overrides</a> exists to customize your import map through an in-browser UI. This tool will automatically let you toggle one or more microfrontends between your localhost and the deployed version.</p>
<p>Alternatively, you can use <a href="https://github.com/single-spa/standalone-single-spa-webpack-plugin" target="_blank" rel="noopener noreferrer">standalone-single-spa-webpack-plugin</a>, which allows you to develop each application in standalone mode. Another alternative is to always run the single-spa root config locally, in addition to whichever microfrontends you&#x27;re developing.</p>
<p>The single-spa core team recommends development on deployed environments via import-map-overrides, as we find that to be the best developer experience, since it allows you to only start one project at a time while also ensuring there&#x27;s no difference between the local environment and fully-integrated deployed environment. However, there are cases when running the root config locally or using standalone-single-spa-webpack-plugin can be useful.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-tools-webpack--rollup">Build tools (Webpack / Rollup)<a href="#build-tools-webpack--rollup" class="hash-link" aria-label="Direct link to Build tools (Webpack / Rollup)" title="Direct link to Build tools (Webpack / Rollup)">​</a></h2>
<p>Tutorial video: <a href="https://www.youtube.com/watch?v=I6COIg-2lyM&amp;list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU&amp;index=9" target="_blank" rel="noopener noreferrer">Youtube</a> / <a href="https://www.bilibili.com/video/av84104639/" target="_blank" rel="noopener noreferrer">Bilibili</a></p>
<p>It is highly encouraged to use a bundler such as webpack, rollup, parceljs, pikapack, etc. Webpack is an industry-standard for compiling many JavaScript source files into one or more production JavaScript bundles.</p>
<p>Below are some tips for configuring your bundler to be consumable by SystemJS and single-spa. Note that if you&#x27;re using <a href="/docs/create-single-spa">create-single-spa</a> that these are all set up for you. We leave these instructions here not to overwhelm you with webpack configuration hell, but rather to help you if you choose not to use create-single-spa.</p>
<ol>
<li>Set the output target to <code>system</code>. In webpack, this is done via <a href="https://webpack.js.org/configuration/output/#outputlibrarytarget" target="_blank" rel="noopener noreferrer"><code>output.libraryTarget</code></a></li>
<li>Use a single <a href="https://webpack.js.org/concepts/entry-points/#root" target="_blank" rel="noopener noreferrer">entry point</a>, with <a href="https://webpack.js.org/guides/code-splitting/#dynamic-imports" target="_blank" rel="noopener noreferrer">dynamic imports</a> for any code splitting that you&#x27;d like to accomplish. This best matches the &quot;one bundled project = one in-browser module&quot; paradigm encouraged by the single-spa core team.</li>
<li>Do not use webpack&#x27;s <a href="https://webpack.js.org/configuration/optimization/#root" target="_blank" rel="noopener noreferrer"><code>optimization</code></a> configuration options, as they make it harder to load the outputted JavaScript files as a single in-browser JavaScript module. Doing so does not make your bundle less optimized - dynamic imports are a viable strategy for accomplishing optimized bundles.</li>
<li>Follow <a href="https://github.com/systemjs/systemjs#compatibility-with-webpack" target="_blank" rel="noopener noreferrer">the systemjs docs for webpack</a>.</li>
<li>Consider using <a href="https://github.com/joeldenning/systemjs-webpack-interop" target="_blank" rel="noopener noreferrer">systemjs-webpack-interop</a> to create or verify your webpack config.</li>
<li>Use <a href="https://github.com/joeldenning/systemjs-webpack-interop" target="_blank" rel="noopener noreferrer">systemjs-webpack-interop</a> to <a href="https://webpack.js.org/guides/public-path/#on-the-fly" target="_blank" rel="noopener noreferrer">set your webpack public path &quot;on the fly&quot;</a>.</li>
<li>Do not set webpack <a href="https://webpack.js.org/configuration/output/#outputlibrary" target="_blank" rel="noopener noreferrer"><code>output.library</code></a>. SystemJS does not need a name, and in fact does not support named modules without additional configuration.</li>
<li>Consider turning off <a href="https://webpack.js.org/configuration/output/#outputfilename" target="_blank" rel="noopener noreferrer">webpack hashing</a> for both entry and code split bundles. It is often easier to add in a commit hash during deployment of your microfrontend via your CI environment variables.</li>
<li>Configure webpack-dev-server to not do host checks. (<a href="https://webpack.js.org/configuration/dev-server/#devserverdisablehostcheck" target="_blank" rel="noopener noreferrer">docs</a>).</li>
<li>Configure webpack-dev-server for CORS by setting <code>{headers: {&#x27;Access-Control-Allow-Origin&#x27;: &#x27;*&#x27;}}</code>. (<a href="https://stackoverflow.com/questions/31602697/webpack-dev-server-cors-issue" target="_blank" rel="noopener noreferrer">docs</a>)</li>
<li>If developing on https, <a href="https://webpack.js.org/configuration/dev-server/#devserverhttps" target="_blank" rel="noopener noreferrer">configure webpack-dev-server for HTTPS</a>. Also consider <a href="https://stackoverflow.com/questions/7580508/getting-chrome-to-accept-self-signed-localhost-certificate" target="_blank" rel="noopener noreferrer">trusting SSL certificates from localhost</a>.</li>
<li>Make sure that your <a href="https://webpack.js.org/configuration/externals/#root" target="_blank" rel="noopener noreferrer">webpack externals</a> are correctly configured for any shared, in-browser modules that you are importing.</li>
<li>Set <a href="https://webpack.js.org/configuration/output/#outputjsonpfunction" target="_blank" rel="noopener noreferrer">output.jsonpFunction</a> to be a unique string for this project. Since you&#x27;ll have multiple webpack bundles running in the same browser tab, a collision of the <code>jsonpFunction</code> could result in webpack modules getting mixed between bundles.</li>
<li>Set <a href="https://webpack.js.org/configuration/dev-server/#devserversockport" target="_blank" rel="noopener noreferrer">sockPort</a>, <a href="https://webpack.js.org/configuration/dev-server/#devserversockpath" target="_blank" rel="noopener noreferrer">sockPath</a>, and <a href="https://webpack.js.org/configuration/dev-server/#devserversockhost" target="_blank" rel="noopener noreferrer">sockHost</a> inside of your <code>devServer</code> configuration.</li>
<li>For webpack, set <a href="https://webpack.js.org/configuration/output/#outputdevtoolnamespace" target="_blank" rel="noopener noreferrer"><code>output.devtoolNamespace</code></a> to your MFE&#x27;s name. This helps namespace your sourcemaps to each MFE.</li>
</ol>
<p>For a bit more information specific to webpack code splits, see <a href="/docs/faq#code-splits">the code splits FAQ</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="utility-modules-styleguide-api-etc">Utility modules (styleguide, API, etc)<a href="#utility-modules-styleguide-api-etc" class="hash-link" aria-label="Direct link to Utility modules (styleguide, API, etc)" title="Direct link to Utility modules (styleguide, API, etc)">​</a></h2>
<p>A &quot;utility module&quot; is an in-browser JavaScript module that is not a single-spa application or parcel. In other words, it&#x27;s only purpose is to export functionality for other microfrontends to import.</p>
<p>Common examples of utility modules include styleguides, authentication helpers, and API helpers. These modules do not need to be registered with single-spa, but are important for maintaining consistency between several single-spa applications and parcels.</p>
<p>Example code in a utility module:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// In a repo called &quot;api&quot;, you may export functions from the repo&#x27;s entry file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// These functions will be available to single-spa application, parcels, and other in-browser modules</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// via an import statement.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">authenticatedFetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">url</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Maybe do some auth stuff here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example code in a single-spa application that is using the utility module:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Inside of a single-spa application, you can import the functions from the &#x27;api&#x27; repo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;react&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> authenticatedFetch </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@org-name/api&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> abortController </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">AbortController</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">authenticatedFetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">/api/clients/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">props</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation property-access">clientId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token literal-property property">signal</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> abortController</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">signal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      abortController</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">abort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">clientId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword null nil" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To make utility modules work, you must ensure that your webpack externals and import map are properly configured. An example of a working styleguide may be found at <a href="https://github.com/vue-microfrontends/styleguide" target="_blank" rel="noopener noreferrer">https://github.com/vue-microfrontends/styleguide</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cross-microfrontend-imports">Cross microfrontend imports<a href="#cross-microfrontend-imports" class="hash-link" aria-label="Direct link to Cross microfrontend imports" title="Direct link to Cross microfrontend imports">​</a></h2>
<p>Example - <a href="https://github.com/vue-microfrontends/styleguide/blob/af3eaa70bec7daa74635eb3ec76140fb647b0b14/src/vue-mf-styleguide.js#L5" target="_blank" rel="noopener noreferrer">exporting a shared component</a>, <a href="https://github.com/vue-microfrontends/rate-dogs/blob/fe3196234b9cbd6d627199b03a96e7b5f0285c4b/src/components/rate-dogs.vue#L25" target="_blank" rel="noopener noreferrer">importing a shared component</a>, and <a href="https://github.com/vue-microfrontends/rate-dogs/blob/97489e2acb1de44aca910ef5e3e0a9d2494200c7/vue.config.js#L14" target="_blank" rel="noopener noreferrer">required webpack config</a>.</p>
<p>You can import and export functions, components, logic, data, event emitters, and environment variables between your microfrontends that are in different git repos and JavaScript bundles. Each microfrontend should have a single <a href="https://webpack.js.org/concepts/entry-points/#root" target="_blank" rel="noopener noreferrer">entry file</a> that serves as the &quot;public interface&quot; that controls what is exposed outside of the microfrontend.</p>
<p>To make cross microfrontend imports possible, configure your bundler so that the microfrontends are treated as &quot;externals&quot; (<a href="https://webpack.js.org/configuration/externals/#root" target="_blank" rel="noopener noreferrer">webpack docs</a> / <a href="https://rollupjs.org/guide/en/#external" target="_blank" rel="noopener noreferrer">rollup docs</a>). Marking them as externals ensures that they are treated as <a href="#in-browser-versus-build-time-modules">in-browser modules</a> instead of build-time modules.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Inside of the &quot;entry file&quot; for a utility module called @org-name/auth,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// expose your public interface that other microfrontends can access.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Often this is within the main.js or main.single-spa.js file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">userHasAccess</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">permission</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> loggedInUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">permissions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">some</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> p </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> permission</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> userHasAccess </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@org-name/auth&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Inside of a single-spa application, import and use a util function from a different microfrontend</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> showLinkToInvoiceFeature </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">userHasAccess</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;invoicing&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// In your webpack config, mark @org-name auth as a webpack external</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">externals</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@org-name/auth&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Alternatively, mark *all* org-name packages as externals</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// externals: [/^@org-name\/.+/]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="shared-dependencies">Shared dependencies<a href="#shared-dependencies" class="hash-link" aria-label="Direct link to Shared dependencies" title="Direct link to Shared dependencies">​</a></h2>
<p>For performance, it is crucial that your web app loads large JavaScript libraries only once. Your framework of choice (React, Vue, Angular, etc) should only be loaded on the page a single time.</p>
<p>It is not advisable to make everything a shared dependency, because shared dependencies must be upgraded at once for every microfrontend that uses them. For small libraries, it is likely acceptable to duplicate them in each microfrontend that uses them. For example, react-router is likely small enough to duplicate, which is nice when you want to upgrade your routing one microfrontend at a time. However, for large libraries like react, momentjs, rxjs, etc, you may consider making them shared dependencies.</p>
<p>There are two approaches to sharing dependencies:</p>
<ol>
<li><a href="#import-maps">In-browser modules with import maps</a></li>
<li><a href="#module-federation">Build-time modules with module federation</a></li>
</ol>
<p>You may use either one, or both. We currently recommend only using import maps, although we have no objection to module federation.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="comparison-of-approaches">Comparison of approaches<a href="#comparison-of-approaches" class="hash-link" aria-label="Direct link to Comparison of approaches" title="Direct link to Comparison of approaches">​</a></h3>
<table><thead><tr><th>Approach</th><th>Share dependencies</th><th>Bundler requirements</th><th>Managing dependencies</th></tr></thead><tbody><tr><td>Import Maps</td><td>Fully supported</td><td>Any bundler</td><td><a href="https://github.com/polyglot-microfrontends/shared-dependencies/blob/master/importmap.json" target="_blank" rel="noopener noreferrer">shared dependecies repo</a></td></tr><tr><td>Module Federation</td><td>Fully supported</td><td>Only webpack@&gt;=5</td><td><a href="https://github.com/ScriptedAlchemy/mfe-webpack-demo/blob/f48ff0bd0b7d62b722ea000e5ded73f0d076a0b7/packages/01-host/webpack.config.js#L47" target="_blank" rel="noopener noreferrer">multiple webpack configs</a></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sharing-with-import-maps">Sharing with Import Maps<a href="#sharing-with-import-maps" class="hash-link" aria-label="Direct link to Sharing with Import Maps" title="Direct link to Sharing with Import Maps">​</a></h3>
<p>To share a dependency between microfrontends with <a href="#import-maps">Import Maps</a>, you should use <a href="https://webpack.js.org/configuration/externals/#root" target="_blank" rel="noopener noreferrer">webpack externals</a>, <a href="https://rollupjs.org/guide/en/#external" target="_blank" rel="noopener noreferrer">rollup externals</a>, or similar. Marking libraries as external tells your bundler to not use the version in your node_modules, but rather to expect the library to exist as an in-browser module.</p>
<p>To make the shared dependencies available as in-browser modules, they must be present in your import map. A good way of managing them is to create a repository called <code>shared-dependencies</code> that has a partial import map in it. The CI process for that repository updates your deployed import map. Upgrading the shared dependencies can then be achieved by making a pull request to that repository.</p>
<p>Not all libraries publish their code in a suitable format for SystemJS consumption. In those cases, check <a href="https://github.com/esm-bundle" target="_blank" rel="noopener noreferrer">https://github.com/esm-bundle</a> for a SystemJS version of those libraries. Alternatively, you may use <a href="https://github.com/systemjs/systemjs#extras" target="_blank" rel="noopener noreferrer">SystemJS extras</a> to support UMD bundles, which are often available.</p>
<p>Another option for finding a suitable version of a library for your import map is to use the JSPM CDN, which provides precompiled SystemJS versions of every package on npm (example: <a href="https://system-cdn.jspm.io/npm:@material-ui/core@4.11.3/index.js" target="_blank" rel="noopener noreferrer">https://system-cdn.jspm.io/npm:@material-ui/core@4.11.3/index.js</a>). See <a href="https://jspm.org/docs/cdn" target="_blank" rel="noopener noreferrer">https://jspm.org/docs/cdn</a> for more info. You can generate an import map for your shared dependencies at <a href="https://generator.jspm.io/" target="_blank" rel="noopener noreferrer">https://generator.jspm.io/</a>.</p>
<p>Another option for hosting shared dependencies is <a href="https://github.com/single-spa/self-hosted-shared-dependencies" target="_blank" rel="noopener noreferrer">self-hosted-shared-dependencies</a>, which generates a directory of third party packages that you can self host on your server / CDN.</p>
<p>An example of a shared-dependencies repo, along with a functioning CI process for it, can be found at <a href="https://github.com/polyglot-microfrontends/shared-dependencies" target="_blank" rel="noopener noreferrer">https://github.com/polyglot-microfrontends/shared-dependencies</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sharing-with-module-federation">Sharing with Module Federation<a href="#sharing-with-module-federation" class="hash-link" aria-label="Direct link to Sharing with Module Federation" title="Direct link to Sharing with Module Federation">​</a></h3>
<p>At the time of this writing, module federation is new and still changing. Check out <a href="https://github.com/joeldenning/mfe-webpack-demo/tree/system" target="_blank" rel="noopener noreferrer">this example repo</a> which uses systemjs to load the microfrontends, but module federation to share <code>react</code>, <code>react-dom</code>, and <code>react-router</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-and-continuous-integration-ci">Deployment and Continuous Integration (CI)<a href="#deployment-and-continuous-integration-ci" class="hash-link" aria-label="Direct link to Deployment and Continuous Integration (CI)" title="Direct link to Deployment and Continuous Integration (CI)">​</a></h2>
<p>Tutorial video (Part 1): <a href="https://www.youtube.com/watch?v=QHunH3MFPZs&amp;list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU&amp;index=5" target="_blank" rel="noopener noreferrer">Youtube</a> / <a href="https://www.bilibili.com/video/av84100303/" target="_blank" rel="noopener noreferrer">Bilibili</a></p>
<p>Tutorial video (Part 2): <a href="https://www.youtube.com/watch?v=nC7rpDXa4B8&amp;list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU&amp;index=6" target="_blank" rel="noopener noreferrer">Youtube</a> / <a href="https://www.bilibili.com/video/av84099642/" target="_blank" rel="noopener noreferrer">Bilibili</a></p>
<p><a href="https://github.com/single-spa/import-map-deployer/tree/master/examples" target="_blank" rel="noopener noreferrer">Example CI configuration files</a></p>
<p>Microfrontends are built and deployed completely independently. This means that the git repository, CI, build, and deployments all occur without going through a centralized repository. For this reason, monorepos are not encouraged for microfrontends. CI for monorepos can be configured to only build and deploy the packages that have changed but it is often more complex. Modern CI platforms such as <a href="https://aws.amazon.com/blogs/mobile/set-up-continuous-deployment-and-hosting-for-a-monorepo-with-aws-amplify-console/" target="_blank" rel="noopener noreferrer">AWS Amplify</a> and <a href="https://vercel.com/blog/monorepos" target="_blank" rel="noopener noreferrer">Vercel</a> are starting to have built-in support for monorepos however.</p>
<p>There are two steps to deploying a microfrontend.</p>
<ol>
<li>Uploading production JavaScript bundles to a web server / CDN. It is encouraged to use a CDN such as AWS S3 + Cloudfront, Google Cloud Storage, Microsoft Azure Storage, Digital Ocean Spaces, etc because of their superior availability, caching, and performance due to edge locations. The JavaScript files that you upload are completely static. It is encouraged to always write new files to the CDN instead of overwriting files.</li>
<li>Updating your import map to point to the newly deployed file.</li>
</ol>
<p>The implementation of Step 1 is dependent on the infrastructure you&#x27;re using for your CDN. The AWS CLI (<a href="https://docs.aws.amazon.com/cli/latest/reference/s3/" target="_blank" rel="noopener noreferrer"><code>aws s3 sync</code></a>), Google gsutil (<a href="https://github.com/single-spa/import-map-deployer/blob/master/examples/ci-for-javascript-repo/gitlab-gcp-storage/.gitlab-ci.yml" target="_blank" rel="noopener noreferrer"><code>gsutil cp</code></a>), etc are easy ways of accomplishing this.</p>
<p>If you prefer or require using docker containers rather than Cloud Storage like S3, see <a href="https://github.com/single-spa/docker-import-maps-mfe-server" target="_blank" rel="noopener noreferrer">https://github.com/single-spa/docker-import-maps-mfe-server</a></p>
<p>For the implementation of Step 2, you have a choice:</p>
<p>a) Your CI makes a <code>curl</code> HTTP call to a running instance of <a href="https://github.com/single-spa/import-map-deployer" target="_blank" rel="noopener noreferrer">import-map-deployer</a>, which updates the import map in a concurrent-safe way.
b) Your CI runner pulls down the import map, modify it, and reuploads it.</p>
<p>The advantage of a) is that it is concurrent-safe for multiple, simultaneous deployments. Without a concurrent-safe solution, there might be multiple processes pulling down and reuploading the import map at the same time, which could result in a race condition where one CI process thinks it successfully updated the import map when in reality the other CI process wrote the import map later, having based its changes on a stale version of the import map.</p>
<p>The advantage of b) is that it doesn&#x27;t require running the import-map-deployer in your production environment. Ultimately, you should choose whichever option makes sense for your organization.</p>
<p>Another option of deploying and making sure the latests javascript files are beeing used is making use of redirect (HTTP status code 302). The single-spa import map uses the unhashed url of the javascript file. eg: dist/app.js. Then when the requests for this file comes to the server it is redirected to the actual deployed file eg. dist/app.123abc.js and this is then served to the client. This way the import map never has to be updated and the microfrontend can be separately deployed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="applications-versus-parcels-versus-utility-modules">Applications versus parcels versus utility modules<a href="#applications-versus-parcels-versus-utility-modules" class="hash-link" aria-label="Direct link to Applications versus parcels versus utility modules" title="Direct link to Applications versus parcels versus utility modules">​</a></h2>
<p>Single-spa has <a href="/docs/microfrontends-concept#types-of-microfrontends">different categories</a> of microfrontends. It is up to you where and how you use each of them. However, the single-spa core team recommends the following:</p>
<p><strong>Many route-based single-spa applications, very few single-spa parcels</strong></p>
<ol>
<li>Prefer splitting microfrontends by route, instead of by components within a route. This means preferring single-spa applications over single-spa parcels whenever possible. The reason for this is that transitions between routes often involve destroying and recreating most UI state, which means your single-spa applications on different routes do not need to ever share UI state.</li>
<li>Move fixed navigation menus into their own single-spa applications. Implement their <a href="/docs/configuration#activity-function">activity functions</a> to be active by default, only unmounting for the login page.</li>
<li>Create utility modules for your core component library / styleguide, for shared authentication / authorization code, and for global error handling.</li>
<li>If you are only using one framework, prefer framework components (i.e. React, Vue, and Angular components) over single-spa parcels. This is because framework components interop easier with each other than when there is an intermediate layer of single-spa parcels. You can import components between single-spa applications You should only create a single-spa parcel if you need it to work with multiple frameworks.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="inter-app-communication">Inter-app communication<a href="#inter-app-communication" class="hash-link" aria-label="Direct link to Inter-app communication" title="Direct link to Inter-app communication">​</a></h2>
<p><em>A good architecture is one in which microfrontends are decoupled and do not need to frequently communicate. Following the guidelines above about applications versus parcels helps you keep your microfrontends decoupled. Route-based single-spa applications inherently require less inter-app communication.</em></p>
<p>There are three things that microfrontends might need to share / communicate:</p>
<ol>
<li>Functions, components, logic, and environment variables.</li>
<li>API data</li>
<li>UI state</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functions-components-logic-and-environment-variables">Functions, components, logic, and environment variables<a href="#functions-components-logic-and-environment-variables" class="hash-link" aria-label="Direct link to Functions, components, logic, and environment variables" title="Direct link to Functions, components, logic, and environment variables">​</a></h3>
<p>We recommend using <a href="#cross-microfrontend-imports">cross microfrontend imports</a> to share functions, components, logic, and environment variables.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="api-data">API Data<a href="#api-data" class="hash-link" aria-label="Direct link to API Data" title="Direct link to API Data">​</a></h3>
<p>Example - <a href="https://github.com/react-microfrontends/api/blob/c3c336129e920bbc6137f04cce24b718105efed1/src/react-mf-api.js#L3" target="_blank" rel="noopener noreferrer">exporting a <code>fetchWithCache</code> function</a> and <a href="https://github.com/react-microfrontends/people/blob/ad18de9b96b52e6975244e6662becfe13e41a2db/src/utils/api.js#L1" target="_blank" rel="noopener noreferrer">importing the function</a>.</p>
<p>API data often does not need to be shared between microfrontends, since each single-spa application controls different routes and different routes often have different data. However, occasionally you do need to share API data between microfrontends. An in-memory JavaScript cache of API objects is a solution used by several companies to solve this. For React users, this is similar to Data Fetching with Suspense, where the fetching logic for routes is split out from the component code that uses the data.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Inside of your api utility module, you can lazily fetch data either when another microfrontend calls your exported</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// functions, or eagerly fetch it when the route changes.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> loggedInUserPromise </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;...&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">ok</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">throw</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">Error getting user, server responded with HTTP </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">r</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation property-access">status</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getLoggedInUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> loggedInUserPromise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> getLoggedInUser </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@org-name/api&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Inside of app1, you can import something from an &quot;api&quot; utility module</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">getLoggedInUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ui-state">UI State<a href="#ui-state" class="hash-link" aria-label="Direct link to UI State" title="Direct link to UI State">​</a></h3>
<p><em>If two microfrontends are frequently passing state between each other, consider merging them. The disadvantages of microfrontends are enhanced when your microfrontends are not isolated modules.</em></p>
<p>UI State, such as &quot;is the modal open,&quot; &quot;what&#x27;s the current value of that input,&quot; etc. largely does not need to be shared between microfrontends. If you find yourself needing constant sharing of UI state, your microfrontends are likely more coupled than they should be. Consider merging them into a single microfrontend.</p>
<p>Under the rare circumstances where you do need to share UI state between single-spa applications, an event emitter may be used to do so. Below are a few examples of event emitters that might help you out.</p>
<ol>
<li>Observables / Subjects (rxjs) - one microfrontend emits new values to a stream that can be consumed by any other microfrontend. It exports the observable to all microfrontends from its in-browser module, so that others may import it.</li>
<li>CustomEvents - browsers have a built-in event emitter system that allows you to fire custom events. Check out <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events" target="_blank" rel="noopener noreferrer">this documentation</a> for more information. Firing the events with <code>window.dispatchEvent</code> allows you to subscribe in any other microfrontend with <code>window.addEventListener</code>.</li>
<li>Any other pub/sub event emitter system.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-management">State management<a href="#state-management" class="hash-link" aria-label="Direct link to State management" title="Direct link to State management">​</a></h2>
<p>The single-spa core team cautions against using redux, mobx, and other global state management libraries. However, if you&#x27;d like to use a state management library, we recommend keeping the state management tool specific to a single repository / microfrontend instead of a single store for all of your microfrontends. The reason is that microfrontends are not truly decoupled or framework agnostic if they all must use a global store. You cannot independently deploy a microfrontend if it relies on the global store&#x27;s state to be a specific shape or have specific actions fired by other microfrontends - to do so you&#x27;d have to think really hard about whether your changes to the global store are backwards and forwards compatible with all other microfrontends. Additionally, managing global state during route transitions is hard enough without the complexity of multiple microfrontends contributing to and consuming the global state.</p>
<p>Instead of a global store, the single-spa core team recommends using local component state for your components, or a store for each of your microfrontends. See the above section &quot;<a href="#inter-app-communication">Inter-app communication</a>&quot; for more related information.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/single-spa/single-spa.js.org/blob/master/website/versioned_docs/version-6.x/recommended-setup.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/layout-api"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Applications API</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#alternatives" class="table-of-contents__link toc-highlight">Alternatives</a></li><li><a href="#in-browser-versus-build-time-modules" class="table-of-contents__link toc-highlight">In-browser versus build-time modules</a></li><li><a href="#import-maps" class="table-of-contents__link toc-highlight">Import Maps</a></li><li><a href="#module-federation" class="table-of-contents__link toc-highlight">Module Federation</a></li><li><a href="#systemjs" class="table-of-contents__link toc-highlight">SystemJS</a></li><li><a href="#lazy-loading" class="table-of-contents__link toc-highlight">Lazy loading</a></li><li><a href="#local-development" class="table-of-contents__link toc-highlight">Local development</a></li><li><a href="#build-tools-webpack--rollup" class="table-of-contents__link toc-highlight">Build tools (Webpack / Rollup)</a></li><li><a href="#utility-modules-styleguide-api-etc" class="table-of-contents__link toc-highlight">Utility modules (styleguide, API, etc)</a></li><li><a href="#cross-microfrontend-imports" class="table-of-contents__link toc-highlight">Cross microfrontend imports</a></li><li><a href="#shared-dependencies" class="table-of-contents__link toc-highlight">Shared dependencies</a><ul><li><a href="#comparison-of-approaches" class="table-of-contents__link toc-highlight">Comparison of approaches</a></li><li><a href="#sharing-with-import-maps" class="table-of-contents__link toc-highlight">Sharing with Import Maps</a></li><li><a href="#sharing-with-module-federation" class="table-of-contents__link toc-highlight">Sharing with Module Federation</a></li></ul></li><li><a href="#deployment-and-continuous-integration-ci" class="table-of-contents__link toc-highlight">Deployment and Continuous Integration (CI)</a></li><li><a href="#applications-versus-parcels-versus-utility-modules" class="table-of-contents__link toc-highlight">Applications versus parcels versus utility modules</a></li><li><a href="#inter-app-communication" class="table-of-contents__link toc-highlight">Inter-app communication</a><ul><li><a href="#functions-components-logic-and-environment-variables" class="table-of-contents__link toc-highlight">Functions, components, logic, and environment variables</a></li><li><a href="#api-data" class="table-of-contents__link toc-highlight">API Data</a></li><li><a href="#ui-state" class="table-of-contents__link toc-highlight">UI State</a></li></ul></li><li><a href="#state-management" class="table-of-contents__link toc-highlight">State management</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Courses</h4><ul class="footer__items"><li class="footer__item"><a href="https://single-spa-workshop.com" target="_blank" rel="noopener noreferrer" class="footer__link-item" label="Single-Spa Workshop">Single-Spa Workshop</a></li><li class="footer__item"><a href="https://single-spa-workshop.com" target="_blank" rel="noopener noreferrer" class="footer__link-item" label="Microfrontend Fundamentals">Microfrontend Fundamentals</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="FAQ" href="/docs/faq/">FAQ</a></li><li class="footer__item"><a class="footer__link-item" label="Getting Started" href="/docs/getting-started-overview/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" label="API Reference" href="/docs/api/">API Reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="Governance" href="/governance/">Governance</a></li><li class="footer__item"><a class="footer__link-item" label="Code of Conduct" href="/code-of-conduct/">Code of Conduct</a></li><li class="footer__item"><a class="footer__link-item" label="Sponsors" href="/sponsors/">Sponsors</a></li><li class="footer__item"><a class="footer__link-item" label="User Showcase" href="/users/">User Showcase</a></li><li class="footer__item"><a class="footer__link-item" label="Contributors" href="/contributors/">Contributors</a></li><li class="footer__item"><a href="https://join.slack.com/t/single-spa/shared_invite/zt-2uvhef42o-g4H3mvKDaenE9xVAewBKww" target="_blank" rel="noopener noreferrer" class="footer__link-item" label="Chat in Slack">Chat in Slack</a></li><li class="footer__item"><a href="https://twitter.com/Single_spa/" target="_blank" rel="noopener noreferrer" class="footer__link-item" label="Twitter">Twitter</a></li><li class="footer__item footer__item--gh"><iframe title="github" src="https://ghbtns.com/github-btn.html?user=single-spa&amp;repo=single-spa&amp;type=star&amp;count=true&amp;size=small"></iframe></li><li class="footer__item"><a href="/img/icons/148705-essential-collection/license/license.html">License for icons</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/single-spa/single-spa" target="_blank" rel="noopener noreferrer" class="footer__link-item" label="GitHub">GitHub</a></li><li class="footer__item"><a href="https://opencollective.com/single-spa" target="_blank" rel="noopener noreferrer" class="footer__link-item" label="Donate">Donate</a></li><li class="footer__item"><a class="footer__link-item" label="Blog" href="/blog/">Blog</a></li></ul></div></div><div class="text--center"><img class="footer__logo margin-bottom--sm" alt="single-spa" src="/img/single-spa-logo-magenta.svg"><div>Originally developed at <a href="https://getcanopy.com">Canopy</a></div>Copyright © 2025 single-spa.</div></div></footer></div>
</body>
</html>