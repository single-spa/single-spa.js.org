<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>
              window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
              ga('create', 'UA-138683004-1', 'auto');
              ga('send', 'pageview');
            </script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"17896441":["/17896441.91d95dee.js"],"40951796":["/40951796.812db271.js"],"77404338":["/77404338.dac1f728.js"],"main":["/main.e904a18e.js"],"015816e2":["/015816e2.dacc9200.js"],"02af63f8":["/02af63f8.56595b8a.js"],"075c7a17":["/075c7a17.77960696.js"],"076c147e":["/076c147e.8252134c.js"],"08c25933":["/08c25933.31713925.js"],"0abd59c6":["/0abd59c6.2d19fd61.js"],"0bd57bfb":["/0bd57bfb.ad4e8d1c.js"],"0f78e9b3":["/0f78e9b3.05d243fe.js"],"0f85c961":["/0f85c961.78d204ed.js"],"12a16bf1":["/12a16bf1.92209ab8.js"],"1570933b":["/1570933b.c156e8a6.js"],"1580737e":["/1580737e.bc3c3d79.js"],"166e7bef":["/166e7bef.a9964ae4.js"],"1943dfb2":["/1943dfb2.3aae759f.js"],"1a9639fa":["/1a9639fa.38c9d7d5.js"],"1b7012b8":["/1b7012b8.c00b0b3d.js"],"1b9bd3d9":["/1b9bd3d9.271bdb82.js"],"1be78505":["/1be78505.0f672696.js"],"1dc3c8d9":["/1dc3c8d9.a40f8817.js"],"1e99f093":["/1e99f093.3dbe35dd.js"],"29aa1e09":["/29aa1e09.cfe9640c.js"],"2aac956c":["/2aac956c.759a450a.js"],"2c1965a7":["/2c1965a7.8798d5d1.js"],"2d5563c8":["/2d5563c8.dbb94b7b.js"],"2e1d0e00":["/2e1d0e00.2e9b3ef8.js"],"2e5fe557":["/2e5fe557.14e3e853.js"],"3272ebf4":["/3272ebf4.65ec10aa.js"],"389f1b32":["/389f1b32.dec5ecfb.js"],"38eb30df":["/38eb30df.0ce7022d.js"],"3a7fefd0":["/3a7fefd0.7a67b6e4.js"],"3ab9445b":["/3ab9445b.cede19b7.js"],"3d54de4d":["/3d54de4d.ce7722da.js"],"3dfe9ba5":["/3dfe9ba5.ff24d53e.js"],"3f900230":["/3f900230.dc4df593.js"],"3fa72edb":["/3fa72edb.e04a2e42.js"],"431ca13d":["/431ca13d.24c38760.js"],"442d7a31":["/442d7a31.53c1e007.js"],"444c960c":["/444c960c.b04e0526.js"],"48cf01b6":["/48cf01b6.de5d9591.js"],"4b677fa0":["/4b677fa0.4da990b2.js"],"52af37f2":["/52af37f2.c2b0189b.js"],"5509b76f":["/5509b76f.23b0311c.js"],"565d74f4":["/565d74f4.434f19ea.js"],"56ee44b8":["/56ee44b8.b56e36e5.js"],"572e4edf":["/572e4edf.3846285b.js"],"5896a7ea":["/5896a7ea.13204b14.js"],"591852d8":["/591852d8.83ad6da1.js"],"5b8adf66":["/5b8adf66.0bdf640d.js"],"5ba86545":["/5ba86545.c43c68f5.js"],"5c035ad5":["/5c035ad5.17b094f2.js"],"5c27e93c":["/5c27e93c.7eb3c09d.js"],"5c41c4c9":["/5c41c4c9.9f3214b8.js"],"5cdb502c":["/5cdb502c.c3ea7136.js"],"5d293e86":["/5d293e86.fb5bf3ef.js"],"5df857db":["/5df857db.82ccf20b.js"],"5e12ca1d":["/5e12ca1d.b96a365e.js"],"65cd79b7":["/65cd79b7.e9228e78.js"],"67152cfe":["/67152cfe.2e0287ae.js"],"674fa9c4":["/674fa9c4.7ed7a5d5.js"],"68f5cb3a":["/68f5cb3a.d932143c.js"],"696a01cf":["/696a01cf.bbeb112e.js"],"69e6e3bb":["/69e6e3bb.ae8f8882.js"],"6c11b4de":["/6c11b4de.6d785653.js"],"6c17cf3c":["/6c17cf3c.fcf8e9f6.js"],"6cb48572":["/6cb48572.780e8439.js"],"6ed76f0e":["/6ed76f0e.1acd99d3.js"],"72d0b912":["/72d0b912.b216b40e.js"],"758ac1af":["/758ac1af.e8c11fe1.js"],"760f80dd":["/760f80dd.0bc73ee4.js"],"76852a88":["/76852a88.5b932a4e.js"],"78e9b454":["/78e9b454.427e8c62.js"],"798c9bc2":["/798c9bc2.93dce89d.js"],"7a54a545":["/7a54a545.05e0c790.js"],"7a77816f":["/7a77816f.353d8ca3.js"],"7b16188f":["/7b16188f.c408d1f1.js"],"7bb2f638":["/7bb2f638.85ff51eb.js"],"840a98f0":["/840a98f0.605ea1ce.js"],"85902a93":["/85902a93.5dad2084.js"],"86438d70":["/86438d70.4161b483.js"],"87c6a9c4":["/87c6a9c4.d1f643e3.js"],"88ab1274":["/88ab1274.962892d9.js"],"8ac9c664":["/8ac9c664.07bc8adb.js"],"8aedf5d7":["/8aedf5d7.72f1ee29.js"],"8c472a46":["/8c472a46.c28e3480.js"],"9352d19f":["/9352d19f.cf0a0c61.js"],"93e8f896":["/93e8f896.3c4cd18c.js"],"940fc73a":["/940fc73a.bb271d26.js"],"96f9dd39":["/96f9dd39.9bc23496.js"],"98ffbda8":["/98ffbda8.7e191be6.js"],"99cd0956":["/99cd0956.b09b7a0c.js"],"9afda0ee":["/9afda0ee.0b0c257d.js"],"9c9e4252":["/9c9e4252.403d094d.js"],"9d672d00":["/9d672d00.b2bf29e1.js"],"9e1523d0":["/9e1523d0.06180193.js"],"9e243e3f":["/9e243e3f.1a91b113.js"],"9eb9fa54":["/9eb9fa54.93b8825d.js"],"a1c1515a":["/a1c1515a.1b1c9515.js"],"a4139f5a":["/a4139f5a.ca945b77.js"],"a57ccd44":["/a57ccd44.38b7b7dd.js"],"a5852e81":["/a5852e81.747eadf8.js"],"a62c5788":["/a62c5788.18ec529c.js"],"a6aa9e1f":["/a6aa9e1f.a59760c6.js"],"a80d6cf5":["/a80d6cf5.ca9c8667.js"],"a9668f36":["/a9668f36.ea2a7420.js"],"a97faf63":["/a97faf63.e47fc424.js"],"a998b65c":["/a998b65c.586b9099.js"],"ac1a782b":["/ac1a782b.751fac12.js"],"af6c1c80":["/af6c1c80.cc6fae73.js"],"b025bb67":["/b025bb67.55f4f285.js"],"b0834b9a":["/b0834b9a.be7d6542.js"],"b5351572":["/b5351572.0372969c.js"],"b7efbaa4":["/b7efbaa4.c64f2424.js"],"bba233d4":["/bba233d4.f7844914.js"],"bdd8dcaf":["/bdd8dcaf.8bee2e27.js"],"c0c34336":["/c0c34336.049fe3bf.js"],"c3d0a0a5":["/c3d0a0a5.142eaa90.js"],"c41acfd1":["/c41acfd1.e6a92bb9.js"],"c4f5d8e4":["/c4f5d8e4.0437c558.js"],"c5143b7b":["/c5143b7b.19949aa7.js"],"c54ca5fe":["/c54ca5fe.20742b37.js"],"c867fe7c":["/c867fe7c.87afac58.js"],"caa2e070":["/caa2e070.e7ded126.js"],"cafbfab7":["/cafbfab7.bfa837c3.js"],"cb81218f":["/cb81218f.663879c7.js"],"cc32fbde":["/cc32fbde.76908b40.js"],"ccc49370":["/ccc49370.5f310091.js"],"d1104007":["/d1104007.1235b1e0.js"],"d37dc8dd":["/d37dc8dd.f455a90f.js"],"d3dd1f61":["/d3dd1f61.857ac9ce.js"],"d44557c3":["/d44557c3.a45e07d5.js"],"d5b8fcd8":["/d5b8fcd8.50b2ea28.js"],"d6377ff4":["/d6377ff4.56673ef5.js"],"d7647bb5":["/d7647bb5.8dbb35da.js"],"da0ebe4a":["/da0ebe4a.6be01a80.js"],"daa69925":["/daa69925.391a70f4.js"],"daf1756f":["/daf1756f.10fe0003.js"],"dc7b4688":["/dc7b4688.78ea0937.js"],"dcc53905":["/dcc53905.c7fb8817.js"],"decfdbba":["/decfdbba.07e0087a.js"],"e076d91c":["/e076d91c.f03e65a3.js"],"e16cad4d":["/e16cad4d.856e4cce.js"],"e2603d2d":["/e2603d2d.801d020e.js"],"e26b05e6":["/e26b05e6.448f7605.js"],"e4355444":["/e4355444.5bbf92b9.js"],"e469ac48":["/e469ac48.930b74f4.js"],"e4fbccb0":["/e4fbccb0.2e1c5a02.js"],"e628667e":["/e628667e.8af573d8.js"],"e6b6a638":["/e6b6a638.92340f38.js"],"e74a79a5":["/e74a79a5.9eb5699c.js"],"e84c24e5":["/e84c24e5.c76778d6.js"],"eafe302d":["/eafe302d.5e9f935a.js"],"ec338f2c":["/ec338f2c.292b7fe4.js"],"ee85e528":["/ee85e528.52968024.js"],"ef491088":["/ef491088.29f71bda.js"],"f2b4c57f":["/f2b4c57f.8c478830.js"],"f3344494":["/f3344494.b00466e0.js"],"f539466a":["/f539466a.1f81b95c.js"],"f72bcd7c":["/f72bcd7c.4d35b473.js"],"f8cfee77":["/f8cfee77.86624352.js"],"f91e79c8":["/f91e79c8.85a73d9a.js"],"f9617f5b":["/f9617f5b.23bba656.js"],"fa29c2d5":["/fa29c2d5.a87a2244.js"],"fcc2aa60":["/fcc2aa60.5bc91488.js"],"fcfac0f1":["/fcfac0f1.95309440.js"],"fe4bf730":["/fe4bf730.b44cd826.js"],"feb0df8a":["/feb0df8a.99bad7fc.js"],"ff185f4e":["/ff185f4e.1a41fd36.js"]};/*]]>*/</script>

<title data-react-helmet="true">Layout Engine API</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" property="og:title" content="single-spa · A javascript router for front-end microservices"/><meta data-react-helmet="true" name="docsearch:version" content="5.x"/><meta data-react-helmet="true" property="og:image" content="https://single-spa.github.io/single-spa.js.org/img/docusaurus.png"/><meta data-react-helmet="true" property="twitter:image" content="https://single-spa.github.io/single-spa.js.org/img/docusaurus.png"/><meta data-react-helmet="true" name="twitter:image:alt" content="Image for single-spa · A javascript router for front-end microservices"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="description" content="The single-spa-layout library exposes several javascript functions as a public API."/><meta data-react-helmet="true" property="og:description" content="The single-spa-layout library exposes several javascript functions as a public API."/><meta data-react-helmet="true" property="og:url" content="https://single-spa.github.io/single-spa.js.org/docs/layout-api"/>

<link data-react-helmet="true" rel="shortcut icon" href="/img/logo-blue-favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/styles.d67aca24.css" />

</head>
<body >
<script type="text/javascript">(function() {
  function setDataThemeAttribute(theme) {
    document.querySelector('html').setAttribute('data-theme', theme);
  }
  
  var preferDarkQuery = '(prefers-color-scheme: dark)';
  var mql = window.matchMedia(preferDarkQuery);
  var supportsColorSchemeQuery = mql.media === preferDarkQuery;
  var localStorageTheme = null;
  try {
    localStorageTheme = localStorage.getItem('theme');
  } catch (err) {}
  var localStorageExists = localStorageTheme !== null;

  if (localStorageExists) {
    setDataThemeAttribute(localStorageTheme);
  } else if (supportsColorSchemeQuery && mql.matches) {
    setDataThemeAttribute('dark');
  }
})();</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo-white-bgblue.svg" alt="single-spa Logo"/><strong class="">single-spa</strong></a><a class="navbar__item navbar__link" style="white-space:nowrap;padding:0.25rem 0.5rem 0.2rem 0.25rem;font-size:calc(0.9 * var(--ifm-font-size-base));text-decoration:underline" href="/versions">5.x</a><a class="navbar__item navbar__link" href="/docs/faq/">FAQ</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/help/">Help</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://opencollective.com/single-spa">Donate</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/single-spa/single-spa">GitHub</a><a class="navbar__item navbar__link" href="/languages">简Жहि Languages</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"/></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo-white-bgblue.svg" alt="single-spa Logo"/><strong>single-spa</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" style="white-space:nowrap;padding:0.25rem 0.5rem 0.2rem 0.25rem;font-size:calc(0.9 * var(--ifm-font-size-base));text-decoration:underline" href="/versions">5.x</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/faq/">FAQ</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/help/">Help</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/">Blog</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://opencollective.com/single-spa">Donate</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/single-spa/single-spa">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/languages">简Жहि Languages</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started-overview">Overview of single-spa</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/examples">Resources</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/single-spa-playground">Playground</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/videos">Videos</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/create-single-spa">create-single-spa</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concept: Microfrontend</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/microfrontends-concept">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/module-types">Microfrontend Types</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concept: Root Config</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/configuration">Configuring single-spa</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concept: Application</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/building-applications">single-spa applications</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/separating-applications">Splitting applications</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/migrating-existing-spas">Migrating existing code</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concept: Parcel</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/parcels-overview">Overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Layout Engine</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/layout-overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/layout-definition">Layout Definition</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/layout-api">API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">The Recommended Setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/recommended-setup">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/api">Applications API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/parcels-api">Parcels API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Ecosystem</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-react">React</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-vue">Vue</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-angular">Angular</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-angularjs">AngularJS</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-cycle">Cycle</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-ember">Ember</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-inferno">Inferno</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-preact">Preact</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-svelte">Svelte</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-riot">Riot</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-backbone">Backbone</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-html-web-components">HTML / Web Components</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-leaked-globals">Leaked globals</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-dojo">Dojo</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ecosystem-alpinejs">AlpineJS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Server Side Rendering (New)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/ssr-overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Dev Tools</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/devtools">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/contributing-overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/code-of-conduct">Code of Conduct</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><span style="vertical-align:top" class="badge badge--info">Version: <!-- -->5.x</span><header><h1 class="docTitle_1vWb">Layout Engine API</h1></header><div class="markdown"><p>The single-spa-layout library exposes several javascript functions as a public API.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="browser"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#browser" title="Direct link to heading">#</a>Browser</h2><p>In the browser, single-spa-layout exports the following functions as named exports.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="constructroutes"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#constructroutes" title="Direct link to heading">#</a>constructRoutes</h3><p>The <code>constructRoutes</code> API transforms your <a href="/docs/layout-definition/">Layout Definition</a> into an opaque &quot;resolved routes&quot; object. We call it &quot;opaque&quot; because the shape of the object is irrelevant, as you will only use it when calling other APIs within single-spa-layout.</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> constructRoutes </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa-layout&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> htmlTemplate </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">querySelector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;#single-spa-template&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> layoutData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    authToken</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;78sf9d0fds89-0fysdiuf6sf8&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    loggedInUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/api/user&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  loaders</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    mainContent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">&lt;img src=&quot;loading.gif&quot;&gt;</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// A single-spa parcel config</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    topNav</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">singleSpaReact</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> resolvedRoutes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">constructRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">htmlTemplate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> layoutData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><strong>Arguments</strong></p><ul><li><code>routesConfig</code> (required): Routes config is a <a href="/docs/layout-definition/#json-layouts">JSON Layout Definition</a>, an <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement">HTMLElement</a>, or a <a href="https://github.com/inikulin/parse5">parse5 HTML element</a>. If it is an HTMLElement, it must be a <code>&lt;single-spa-router&gt;</code> element or a <code>&lt;template&gt;</code> that contains a single-spa-router element.</li><li><code>layoutData</code> (optional): Layout data is an optionally provided object that defines <a href="/docs/layout-definition/#props">props</a> and <a href="/docs/layout-definition/#props">loaders</a> for <a href="/docs/layout-definition/#html-layouts">HTML Layouts</a>. You can omit it if using a <a href="/docs/layout-definition/#json-layout">JSON Layout</a> or if you do not need to define props or loaders in your HTML Layout. The layoutData object should have top level properties <code>props</code> and <code>loaders</code> that are each objects. Each of those objects&#x27; keys is the name of a prop or loader and its corresponding value.</li></ul><p><strong>Return value</strong></p><p>An opaque <code>resolvedRoutes</code> object. It is opaque because you will only use the object when calling other single-spa-layout APIs and do not need to read or modify the resolvedRoutes.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="constructapplications"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#constructapplications" title="Direct link to heading">#</a>constructApplications</h3><p>The <code>constructApplications</code> API transforms your <code>resolvedRoutes</code> into <a href="/docs/configuration#registering-applications">single-spa application registration objects</a>. These application registration objects are then used to call <a href="/docs/api/#registerapplication">singleSpa.registerApplication()</a>.</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> constructRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> constructApplications </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa-layout&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> registerApplication </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> resolvedRoutes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">constructRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> applications </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">constructApplications</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  routes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> resolvedRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">loadApp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">System</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">applications</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">registerApplication</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><strong>Arguments</strong></p><p><code>constructApplications</code> accepts a single object as an argument, with the following properties:</p><ul><li><code>routes</code> (required): The opaque <code>resolvedRoutes</code> object returned from <code>constructRoutes</code>.</li><li><code>loadApp</code> (required): A function that is given an application object and must return a <a href="/docs/configuration/#loading-function-or-application">loading function</a>.</li></ul><p><strong>Return value</strong></p><p><code>constructApplications</code> returns an array of <a href="/docs/configuration/#registering-applications">single-spa registration objects</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="constructlayoutengine"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#constructlayoutengine" title="Direct link to heading">#</a>constructLayoutEngine</h3><p>The <code>constructLayoutEngine</code> API transforms your <code>resolvedRoutes</code> and <code>applications</code> into a <code>layoutEngine</code> object. The layout engine is responsible for creating, destroying, and rearranging dom elements during route transitions.</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> constructRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> constructApplications</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> constructLayoutEngine </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa-layout&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> registerApplication</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> start </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> resolvedRoutes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">constructRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> applications </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">constructApplications</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> layoutEngine </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">constructLayoutEngine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">routes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> resolvedRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> applications</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> applications</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">layoutEngine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">isActive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">layoutEngine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">deactivate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">layoutEngine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">activate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">applications</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">registerApplication</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">start</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><strong>Arguments</strong></p><p><code>constructLayoutEngine</code> accepts a single object as an argument, with the following properties:</p><ul><li><code>routes</code> (required): The opaque <code>resolvedRoutes</code> object returned from <code>constructRoutes</code>.</li><li><code>applications</code> (required): The array of <a href="/docs/configuration/#registering-applications">application registration objects</a> returned from <code>constructApplications</code>.</li><li><code>active</code> (optional): A boolean that indicates whether the layout engine should start out active or not. Defaults to true.</li></ul><p><strong>Return Value</strong></p><p>A <code>layoutEngine</code> object, with the following properties:</p><ul><li><p><code>isActive</code>: a function that accepts no arguments and returns a boolean indicating whether the layout engine is active or not. When active, the layout engine will change the DOM during route transitions.</p></li><li><p><code>activate</code>: a function that accepts no arguments and returns <code>undefined</code>. Calling this function activates the layout engine, which includes setting up routing event listeners so that the layout engine can change the DOM during route transitions.</p></li><li><p><code>deactivate</code>: a function that accepts no arguments and returns <code>undefined</code>. Calling this function deactivates the layout engine, which includes tearing down all routing event listeners so that the layout engine no longer changes the DOM during route transitions.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="matchroute"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#matchroute" title="Direct link to heading">#</a>matchRoute</h3><p>The <code>matchRoute</code> API primarily exists for server rendering. It returns a filtered <code>resolvedRoutes</code> object that contains only the routes that match a particular string path.</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> constructRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> matchRoute </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa-layout&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> resolvedRoutes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">constructRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> settingsRoutes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">matchRoute</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">resolvedRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/settings&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> dashboardRoutes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">matchRoute</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">resolvedRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/dashboard&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><strong>Arguments</strong></p><ul><li><code>routes</code> (required): The opaque <code>resolvedRoutes</code> object returned from <code>constructRoutes</code>.</li><li><code>path</code> (required): A string path representing the URL fragment to match the routes with. Note that the path is not a full URL - it only is the pathname part of a browser&#x27;s URL. In server rendering contexts, this is often available as <code>req.url</code>.</li></ul><p><strong>Return Value</strong></p><p>An opaque <code>resolvedRoutes</code> object. It is opaque because you will only use the object when calling other single-spa-layout APIs and do not need to read or modify the resolvedRoutes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="server"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#server" title="Direct link to heading">#</a>Server</h2><p>In NodeJS, single-spa-layout exports the following functions as named exports. Note that the code is published in ESM and therefore won&#x27;t work in old versions of Node. Additionally, single-spa-layout uses <a href="https://nodejs.org/dist/latest-v14.x/docs/api/packages.html#packages_package_entry_points">package entry points</a>, which are only supported in newer versions of Node.</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Works in newer versions of NodeJS</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa-layout&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Works in older versions of NodeJS</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa-layout/dist/esm/single-spa-layout-server.min.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="constructserverlayout"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#constructserverlayout" title="Direct link to heading">#</a>constructServerLayout</h3><p>The <code>constructServerLayout</code> api parses an HTML file and prepares it for rendering. This should be done once when the NodeJS server boots up, so the same serverLayout can be reused for all incoming HTTP requests.</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> constructServerLayout </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa-layout&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> serverLayout </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">constructServerLayout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// filepath is resolved relative to the cwd (current working directory)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// of the NodeJS process.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  filePath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;server/views/index.html&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Alternatively, provide the html as a string</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> serverLayout </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">constructServerLayout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  html</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    &lt;html&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">      &lt;head&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">        &lt;single-spa-router&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">          &lt;application name=&quot;nav&quot;&gt;&lt;/application&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">        &lt;/single-spa-router&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">      &lt;/head&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    &lt;/html&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">  </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><strong>Arguments</strong></p><p><code>constructServerLayout</code> accepts a single object argument, with the following properties:</p><ul><li><code>filePath</code> (optional): A string file path to the HTML template file. Relative paths are resolved relative to <code>process.cwd()</code>. If <code>filePath</code> is omitted, <code>html</code> must be provided.</li><li><code>html</code> (optional): An HTML string containing the HTML template. If <code>html</code> is omitted, <code>filePath</code> must be provided.</li></ul><p><strong>Return Value</strong></p><p><code>constructServerLayout</code> returns an opaque ServerLayout object. This object is then provided to <code>sendLayoutHTTPResponse</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="sendlayouthttpresponse"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#sendlayouthttpresponse" title="Direct link to heading">#</a>sendLayoutHTTPResponse</h3><p>The <code>sendLayoutHTTPResponse</code> api sends HTTP headers and HTML content to the browser. It streams a full HTML file to the browser, so that the browser shows content as soon as it is available, instead of waiting for the entire HTML document. This is done by providing a <a href="https://nodejs.org/dist/latest-v14.x/docs/api/http.html#http_class_http_serverresponse">ServerResponse object</a>, or <code>res</code> to <code>sendLayoutHTTPResponse</code> .</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> constructServerLayout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendLayoutHTTPResponse </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa-layout&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> http </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;http&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> serverLayout </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">constructServerLayout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">createServer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">sendLayoutHTTPResponse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    res</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    serverLayout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    urlPath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> req</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">renderApplication</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> appName</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> propsPromise </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">&lt;button&gt;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">appName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(195, 232, 141)"> app&lt;/button&gt;</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">retrieveApplicationHeaders</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> appName</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> propsPromise </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;x-custom-header&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;value&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">renderFragment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">fragmentName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">&lt;script type=&quot;systemjs-importmap&quot;&gt;{&quot;imports&quot;: {}}&lt;/script&gt;</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">retrieveProp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">propName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;prop value&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">assembleFinalHeaders</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">allHeaders</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      allHeaders</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter">appProps</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> appHeaders</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><strong>Arguments</strong></p><p><code>sendLayoutHTTPResponse</code> accepts one object argument, with the following properties:</p><ul><li><code>res</code> (required): A <a href="https://nodejs.org/api/http.html#http_class_http_serverresponse">ServerResponse</a> object. Express <code>res</code> objects (and likely other framework-specific objects) are supported.</li><li><code>serverLayout</code> (required): The opaque server layout object returned from <code>constructServerLayout</code>.</li><li><code>urlPath</code> (required): A string url path that will be used as the current route. Example: <code>/settings</code></li><li><code>assembleFinalHeaders</code> (required): A function that is passed all application headers and returns the final HTTP headers sent to the browser. The application headers are collected from the <code>retrieveApplicationHeaders</code> function into an array of AppHeaders objects. Each AppHeaders object has an <code>appName</code> and <code>appHeaders</code> object, where the appName is a string and the <code>appHeaders</code> is a headers object. <code>assembleFinalHeaders</code> must return a headers object.</li><li><code>renderApplication</code> (optional): A function that is given information about a single-spa application and should return the HTML content for that application. This function is required if a single-spa application matches the current route. The argument passed to the renderApplication function is an object with an <code>appName</code> string and a <code>propsPromise</code> promise. The <code>propsPromise</code> resolves with the props for the application. The function can return a string, <a href="https://nodejs.org/api/stream.html#stream_readable_streams">Readable stream</a>, or a Promise. Returned promises must resolve with a string or Readable stream.</li><li><code>retrieveApplicationHeaders</code> (optional): A function that is given information about a single-spa application and should return the HTTP response headers for that application. This function is required if a single-spa application matches the current route. The argument passed to the retrieveApplicationHeaders function is an object with an <code>appName</code> string and a <code>propsPromise</code> promise. The <code>propsPromise</code> resolves with the props for the application. The function can a headers object or a Promise that resolves with a headers object.</li><li><code>renderFragment</code> (optional): A function that is given a fragment name and returns the HTML content for that fragment. This corresponds to <code>&lt;fragment&gt;</code> elements in the layout definition, and is required if the the layout definition contains a <code>&lt;fragment&gt;</code> element. The <code>renderFragment</code> function can return a string, <a href="https://nodejs.org/api/stream.html#stream_readable_streams">Readable stream</a>, or a Promise. Returned promises must resolve with a string or Readable stream.</li><li><code>retrieveProp</code> (optional): A function that is given a propName and returns the prop&#x27;s value. This function is required if any rendered applications have props. <code>retrieveProp</code> can return a value, or a promise that resolves with a value.</li></ul><p><strong>Return Value</strong></p><p>A promise that resolves when headers (but not necessarily HTTP response body) are sent.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/single-spa/single-spa.js.org/blob/master/website/versioned_docs/version-5.x/layout-api.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/layout-definition"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->Layout Definition</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/recommended-setup"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">The Recommended Setup<!-- --> »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#browser" class="contents__link">Browser</a><ul class=""><li><a href="#constructroutes" class="contents__link">constructRoutes</a></li><li><a href="#constructapplications" class="contents__link">constructApplications</a></li><li><a href="#constructlayoutengine" class="contents__link">constructLayoutEngine</a></li><li><a href="#matchroute" class="contents__link">matchRoute</a></li></ul></li><li><a href="#server" class="contents__link">Server</a><ul class=""><li><a href="#constructserverlayout" class="contents__link">constructServerLayout</a></li><li><a href="#sendlayouthttpresponse" class="contents__link">sendLayoutHTTPResponse</a></li></ul></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="FAQ" href="/docs/faq/">FAQ</a></li><li class="footer__item"><a class="footer__link-item" label="Getting Started" href="/docs/getting-started-overview/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" label="API Reference" href="/docs/api/">API Reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="User Showcase" href="/users/">User Showcase</a></li><li class="footer__item"><a class="footer__link-item" label="Contributors" href="/contributors/">Contributors</a></li><li class="footer__item"><a class="footer__link-item" label="Chat in Slack" href="https://join.slack.com/t/single-spa/shared_invite/enQtODAwNTIyMzc4OTE1LWUxMTUwY2M1MTY0ZGMzOTUzMGNkMzI1NzRiYzYwOWM1MTEzZDM1NDAyNWM3ZmViOTAzZThkMDcwMWZmNTFmMWQ" target="_blank" rel="noopener noreferrer">Chat in Slack</a></li><li class="footer__item"><a class="footer__link-item" label="Twitter" href="https://twitter.com/Single_spa/" target="_blank" rel="noopener noreferrer">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="GitHub" href="https://github.com/single-spa/single-spa" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="footer__item"><a class="footer__link-item" label="Donate" href="https://opencollective.com/single-spa" target="_blank" rel="noopener noreferrer">Donate</a></li><li class="footer__item"><a class="footer__link-item" label="Blog" href="/blog/">Blog</a></li><li class="footer__item footer__item--gh"><iframe title="github" src="https://ghbtns.com/github-btn.html?user=single-spa&amp;repo=single-spa&amp;type=star&amp;count=true&amp;size=small"></iframe></li><li class="footer__item"><a href="/img/icons/148705-essential-collection/license/license.html">License for icons</a></li></ul></div></div><div class="text--center"><img class="footer__logo margin-bottom--sm" alt="single-spa" src="/img/logo-white-bgblue.svg"/><div>Originally developed at <a href="https://getcanopy.com">Canopy</a></div>Copyright © 2020 single-spa.</div></div></footer>
</div>

<script type="text/javascript" src="/styles.d222fb34.js"></script>

<script type="text/javascript" src="/runtime~main.6a6d4f5d.js"></script>

<script type="text/javascript" src="/main.e904a18e.js"></script>

<script type="text/javascript" src="/1.006c4a09.js"></script>

<script type="text/javascript" src="/2.99d1def3.js"></script>

<script type="text/javascript" src="/1be78505.0f672696.js"></script>

<script type="text/javascript" src="/9c9e4252.403d094d.js"></script>

<script type="text/javascript" src="/17896441.91d95dee.js"></script>

<script type="text/javascript" src="/9afda0ee.0b0c257d.js"></script>

<script type="text/javascript" src="/6ed76f0e.1acd99d3.js"></script>


</body>
</html>