(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{188:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var a=n(0),i=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=i.a.createContext({}),c=function(e){var t=i.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return i.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,l=p(e,["components","mdxType","originalType","parentName"]),u=c(n),d=a,m=u["".concat(o,".").concat(d)]||u[d]||b[d]||r;return n?i.a.createElement(m,s(s({ref:t},l),{},{components:n})):i.a.createElement(m,s({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=d;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<r;l++)o[l]=n[l];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},72:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return p})),n.d(t,"default",(function(){return c}));var a=n(3),i=n(7),r=(n(0),n(188)),o={id:"ecosystem-vue",title:"single-spa-vue",sidebar_label:"Vue"},s={unversionedId:"ecosystem-vue",id:"version-4.x/ecosystem-vue",isDocsHomePage:!1,title:"single-spa-vue",description:"single-spa-vue is a helper library that helps implement single-spa registered application lifecycle functions (bootstrap, mount and unmount) for for use with Vue.js. Check out the single-spa-vue github.",source:"@site/versioned_docs/version-4.x/ecosystem-vue.md",slug:"/ecosystem-vue",permalink:"/docs/4.x/ecosystem-vue",editUrl:"https://github.com/single-spa/single-spa.js.org/blob/master/website/versioned_docs/version-4.x/ecosystem-vue.md",version:"4.x",sidebar_label:"Vue",sidebar:"version-4.x/docs",previous:{title:"single-spa-react",permalink:"/docs/4.x/ecosystem-react"},next:{title:"single-spa-angular",permalink:"/docs/4.x/ecosystem-angular"}},p=[{value:"Starter repo",id:"starter-repo",children:[]},{value:"Live demo",id:"live-demo",children:[]},{value:"Installation",id:"installation",children:[{value:"Vue CLI",id:"vue-cli",children:[]},{value:"Without Vue CLI",id:"without-vue-cli",children:[]}]},{value:"Usage",id:"usage",children:[]},{value:"Shared dependencies",id:"shared-dependencies",children:[{value:"Shared deps with Vue CLI",id:"shared-deps-with-vue-cli",children:[]},{value:"Shared deps without Vue CLI",id:"shared-deps-without-vue-cli",children:[]}]},{value:"Options",id:"options",children:[]},{value:"As a single-spa parcel",id:"as-a-single-spa-parcel",children:[]},{value:"Custom Props",id:"custom-props",children:[]}],l={toc:p};function c(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"single-spa-vue is a helper library that helps implement ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"configuration#registering-applications"}),"single-spa registered application")," ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/4.x/building-applications#registered-application-lifecycle"}),"lifecycle functions")," (bootstrap, mount and unmount) for for use with ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://vuejs.org/"}),"Vue.js"),". Check out the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/single-spa/single-spa-vue"}),"single-spa-vue github"),"."),Object(r.b)("h2",{id:"starter-repo"},"Starter repo"),Object(r.b)("p",null,"For a full example, see ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/joeldenning/coexisting-vue-microfrontends"}),"coexisting-vue-microfrontends"),"."),Object(r.b)("h2",{id:"live-demo"},"Live demo"),Object(r.b)("p",null,Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://coexisting-vue-microfrontends.surge.sh"}),"https://coexisting-vue-microfrontends.surge.sh")),Object(r.b)("h2",{id:"installation"},"Installation"),Object(r.b)("h3",{id:"vue-cli"},"Vue CLI"),Object(r.b)("p",null,"The ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/single-spa/vue-cli-plugin-single-spa"}),"vue-cli-plugin-single-spa")," will get everything set up."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"vue add single-spa\n")),Object(r.b)("p",null,"The CLI Plugin does the following for you:\n1) Modify your webpack config so that your project works as a single-spa application or parcel.\n2) Install ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/single-spa/single-spa-vue"}),"single-spa-vue"),".\n3) Modify your ",Object(r.b)("inlineCode",{parentName:"p"},"main.js")," or ",Object(r.b)("inlineCode",{parentName:"p"},"main.ts")," file so that your project works as a single-spa application or parcel.\n4) Add a ",Object(r.b)("inlineCode",{parentName:"p"},"set-public-path.js")," that will use ",Object(r.b)("inlineCode",{parentName:"p"},"systemjs-webpack-interop")," in order to set the public path of your application."),Object(r.b)("h3",{id:"without-vue-cli"},"Without Vue CLI"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"npm install --save single-spa-vue\n")),Object(r.b)("p",null,"Alternatively, you can use  single-spa-vue by adding ",Object(r.b)("inlineCode",{parentName:"p"},'<script src="https://unpkg.com/single-spa-vue"><\/script>')," to your HTML file and\naccessing the ",Object(r.b)("inlineCode",{parentName:"p"},"singleSpaVue")," global variable."),Object(r.b)("h2",{id:"usage"},"Usage"),Object(r.b)("p",null,"Install ",Object(r.b)("inlineCode",{parentName:"p"},"systemjs-webpack-interop")," if you have not already done so."),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"npm install systemjs-webpack-interop -S")),Object(r.b)("p",null,"Create a file at the same level as your ",Object(r.b)("inlineCode",{parentName:"p"},"main.js/ts")," called ",Object(r.b)("inlineCode",{parentName:"p"},"set-public-path.js")," "),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import { setPublicPath } from 'systemjs-webpack-interop';\n\nsetPublicPath('appName');\n\n")),Object(r.b)("p",null,"Change your application's entry file to be the following."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import './set-public-path';\nimport Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport singleSpaVue from 'single-spa-vue';\n\nconst vueLifecycles = singleSpaVue({\n  Vue,\n  appOptions: {\n    render: h => h(App),\n    router,\n  },\n});\n\nexport const bootstrap = vueLifecycles.bootstrap;\nexport const mount = vueLifecycles.mount;\nexport const unmount = vueLifecycles.unmount;\n\n")),Object(r.b)("p",null,"Note that if you are using the Vue CLI Plugin, your ",Object(r.b)("inlineCode",{parentName:"p"},"main.ts")," or ",Object(r.b)("inlineCode",{parentName:"p"},"main.js")," file will be updated with this code automatically and the ",Object(r.b)("inlineCode",{parentName:"p"},"set-public-path.js")," file\nwill automatically be created with the app name being your package.json's name property."),Object(r.b)("h2",{id:"shared-dependencies"},"Shared dependencies"),Object(r.b)("p",null,"For performance, it is best to share a single version and instance of Vue, Vue Router, and other large libraries."),Object(r.b)("p",null,"To do this, add your shared dependencies as ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://webpack.js.org/configuration/externals"}),"webpack externals"),". Then you use\nan in-browser module loader such as ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/systemjs/systemjs"}),"systemjs")," to provide those shared dependencies\nto each of the single-spa applications. Adding ",Object(r.b)("inlineCode",{parentName:"p"},"vue")," and other libraries to your\n",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"http://single-spa-playground.org/playground/import-map"}),"import map"),". For an example import map that is doing this,\ncheckout ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/joeldenning/coexisting-vue-microfrontends/blob/master/root-html-file/index.html"}),"coexisting-vue-microfrontends' index.html file"),"."),Object(r.b)("p",null,"Sharing a single instance of Vue and other common libraries is highly recommended. See the\n",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://single-spa.js.org/docs/faq.html#is-there-a-recommended-setup"}),"recommended setup for single-spa")," for more details on why."),Object(r.b)("h3",{id:"shared-deps-with-vue-cli"},"Shared deps with Vue CLI"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"// vue.config.js\nmodule.exports = {\n  chainWebpack: config => {\n    config.externals(['vue', 'vue-router'])\n  }\n}\n")),Object(r.b)("h3",{id:"shared-deps-without-vue-cli"},"Shared deps without Vue CLI"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"// webpack.config.js\nmodule.exports = {\n  externals: ['vue', 'vue-router'],\n}\n")),Object(r.b)("h2",{id:"options"},"Options"),Object(r.b)("p",null,"All options are passed to single-spa-vue via the ",Object(r.b)("inlineCode",{parentName:"p"},"opts")," parameter when calling ",Object(r.b)("inlineCode",{parentName:"p"},"singleSpaVue(opts)"),". The following options are available:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"Vue"),": (required) The main Vue object, which is generally either exposed onto the window or is available via ",Object(r.b)("inlineCode",{parentName:"li"},"require('vue')")," ",Object(r.b)("inlineCode",{parentName:"li"},"import Vue from 'vue'"),"."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"appOptions"),": (required) An object which will be used to instantiate your Vue.js application. ",Object(r.b)("inlineCode",{parentName:"li"},"appOptions")," will pass directly through to ",Object(r.b)("inlineCode",{parentName:"li"},"new Vue(appOptions)"),". Note that if you do not provide an ",Object(r.b)("inlineCode",{parentName:"li"},"el")," to appOptions, that a div will be created and appended to the DOM as a default container for your Vue application."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"loadRootComponent"),": (optional and replaces ",Object(r.b)("inlineCode",{parentName:"li"},"appOptions.render"),") A promise that resolves with your root component. This is useful for lazy loading.")),Object(r.b)("h2",{id:"as-a-single-spa-parcel"},"As a single-spa parcel"),Object(r.b)("p",null,"To create a single-spa parcel, simply omit the ",Object(r.b)("inlineCode",{parentName:"p"},"el")," option from your appOptions, since the dom element will be specified by the user of the Parcel. Every other\noption should be provided exactly the same as in the example above."),Object(r.b)("h2",{id:"custom-props"},"Custom Props"),Object(r.b)("p",null,Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/building-applications.html#custom-props"}),"single-spa custom props")," are added to your App component as\n",Object(r.b)("inlineCode",{parentName:"p"},"appOptions.data"),", and are accessible via ",Object(r.b)("inlineCode",{parentName:"p"},"vm.$data"),". See ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://vuejs.org/v2/api/#data"}),"this Vue documentation"),"\nfor more information on ",Object(r.b)("inlineCode",{parentName:"p"},"appOptions.data"),"."))}c.isMDXComponent=!0}}]);